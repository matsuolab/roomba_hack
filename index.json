[{"authors":null,"categories":null,"content":"TRAILã«é–¢ã™ã‚‹æœ€æ–°æƒ…å ±ã‚’ãŠå±Šã‘ã—ã¾ã™ï¼\n","date":-62135596800,"expirydate":-62135596800,"kind":"term","lang":"en","lastmod":-62135596800,"objectID":"2525497d367e79493fd32b198b28f040","permalink":"https://matsuolab.github.io/roomba_hack/authors/admin/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/roomba_hack/authors/admin/","section":"authors","summary":"TRAILã«é–¢ã™ã‚‹æœ€æ–°æƒ…å ±ã‚’ãŠå±Šã‘ã—ã¾ã™ï¼","tags":null,"title":"TRAIL Admin","type":"authors"},{"authors":["jumpei-arima"],"categories":null,"content":"","date":-62135596800,"expirydate":-62135596800,"kind":"term","lang":"en","lastmod":-62135596800,"objectID":"451d184f9c1e53301faf72f3ade4d5c6","permalink":"https://matsuolab.github.io/roomba_hack/authors/jumpei-arima/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/roomba_hack/authors/jumpei-arima/","section":"authors","summary":"","tags":null,"title":"æœ‰é¦¬ ç´”å¹³","type":"authors"},{"authors":["tatsuya-matsushima"],"categories":null,"content":"äººé–“ã¨å…±ç”Ÿã§ãã‚‹ã‚ˆã†ãªé©å¿œçš„ãªãƒ­ãƒœãƒƒãƒˆã®é–‹ç™ºã¨ï¼Œãã®ã‚ˆã†ãªãƒ­ãƒœãƒƒãƒˆã‚’ä½œã‚‹ã“ã¨ã«ã‚ˆã‚Šç”Ÿå‘½æ€§ã‚„çŸ¥èƒ½ã‚’æ§‹æˆçš„ã«ç†è§£ã™ã‚‹ã“ã¨ã«èˆˆå‘³ãŒã‚ã‚Šã¾ã™ï¼ ç‰¹ã«ç¾åœ¨ã¯ï¼Œæ·±å±¤ç”Ÿæˆãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ãŸç’°å¢ƒã®ãƒ€ã‚¤ãƒŠãƒŸã‚¯ã‚¹ã®ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ï¼ˆä¸–ç•Œãƒ¢ãƒ‡ãƒ«ï¼‰ãƒ»ãƒ¢ãƒ‡ãƒ«ãƒ™ãƒ¼ã‚¹å¼·åŒ–å­¦ç¿’ãƒ»ãƒ¡ã‚¿æ¨¡å€£å­¦ç¿’ã«é–¢ã—ã¦ç ”ç©¶ã‚’è¡Œã£ã¦ã„ã¾ã™ï¼\n","date":-62135596800,"expirydate":-62135596800,"kind":"term","lang":"en","lastmod":-62135596800,"objectID":"96eea6d6aacba886dc9c6ad4c3b6f83f","permalink":"https://matsuolab.github.io/roomba_hack/authors/tatsuya-matsushima/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/roomba_hack/authors/tatsuya-matsushima/","section":"authors","summary":"äººé–“ã¨å…±ç”Ÿã§ãã‚‹ã‚ˆã†ãªé©å¿œçš„ãªãƒ­ãƒœãƒƒãƒˆã®é–‹ç™ºã¨ï¼Œãã®ã‚ˆã†ãªãƒ­","tags":null,"title":"æ¾å¶‹ é”ä¹Ÿ","type":"authors"},{"authors":["yuya-ikeda"],"categories":null,"content":"","date":-62135596800,"expirydate":-62135596800,"kind":"term","lang":"en","lastmod":-62135596800,"objectID":"4c9f99a2ef4096b81e6d0a08880581e8","permalink":"https://matsuolab.github.io/roomba_hack/authors/yuya-ikeda/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/roomba_hack/authors/yuya-ikeda/","section":"authors","summary":"","tags":null,"title":"æ± ç”° æ‚ ä¹Ÿ","type":"authors"},{"authors":null,"categories":null,"content":" é–‹ç™ºç’°å¢ƒ ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºç’°å¢ƒã«ä½¿ã‚ã‚Œã¦ã„ã‚‹è¦ç´ ã®æ¦‚è¦ã‚’ç†è§£ã™ã‚‹   ROSã¨ã¯ ãƒ­ãƒœãƒƒãƒˆé–‹ç™ºã«ã‚ˆãç”¨ã„ã‚‰ã‚Œã‚‹ROSã®æ¦‚è¦ã‚’ç†è§£ã™ã‚‹   ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"f1fb9b3e706d6a8e7af6ee8a67c187b1","permalink":"https://matsuolab.github.io/roomba_hack/course/chap1/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/roomba_hack/course/chap1/","section":"course","summary":"ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®åŸºç¤çŸ¥è­˜","tags":null,"title":"Chapter 1","type":"book"},{"authors":null,"categories":null,"content":" ROSã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ»ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ ROSã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã«ã¤ã„ã¦ç†è§£ã—ã‚ˆã†   ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘  ã‚»ãƒ³ã‚µã®å€¤ã‚’èª­ã¿å–ã‚Šãƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†   ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"b03bbdc309591542a3a0cf48966f3d87","permalink":"https://matsuolab.github.io/roomba_hack/course/chap2/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/roomba_hack/course/chap2/","section":"course","summary":"ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘ ","tags":null,"title":"Chapter 2","type":"book"},{"authors":null,"categories":null,"content":" ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘¡ è¤‡æ•°ã®ã‚»ãƒ³ã‚µã‚’çµ„ã¿åˆã‚ã›ã¦ã‚ˆã‚Šã‹ã—ã“ããƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†   ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘¢ è¤‡æ•°ã®ã‚»ãƒ³ã‚µã‚’çµ„ã¿åˆã‚ã›ã¦ã‚ˆã‚Šã‹ã—ã“ããƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†   ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"b891a66c1b2d8231b078e52b380c46a1","permalink":"https://matsuolab.github.io/roomba_hack/course/chap3/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/roomba_hack/course/chap3/","section":"course","summary":"ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘¡","tags":null,"title":"Chapter 3","type":"book"},{"authors":null,"categories":null,"content":" è‡ªå·±ä½ç½®æ¨å®š   ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³   ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"ef4ff386bad3919cafa8bb6a9000e1a5","permalink":"https://matsuolab.github.io/roomba_hack/course/chap4/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/roomba_hack/course/chap4/","section":"course","summary":"è‡ªå¾‹ç§»å‹•","tags":null,"title":"Chapter 4","type":"book"},{"authors":null,"categories":null,"content":" ä¸‰æ¬¡å…ƒç”»åƒå‡¦ç†   ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"c5b6edce25a3188d94c102a439d09587","permalink":"https://matsuolab.github.io/roomba_hack/course/chap5/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/roomba_hack/course/chap5/","section":"course","summary":"3æ¬¡å…ƒç”»åƒèªè­˜","tags":null,"title":"Chapter 5","type":"book"},{"authors":null,"categories":null,"content":" serviceã¨actionlib   ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"8f714aaf4a960d30c5c5c987c0a4c5d1","permalink":"https://matsuolab.github.io/roomba_hack/course/chap6/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/roomba_hack/course/chap6/","section":"course","summary":"è¤‡é›‘ãªãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…ãƒ»åˆ†æ•£å‡¦ç†","tags":null,"title":"Chapter 6","type":"book"},{"authors":null,"categories":null,"content":"","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"2f5bc53e4f4c671993cb760f7d80fa51","permalink":"https://matsuolab.github.io/roomba_hack/course/chap7/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/roomba_hack/course/chap7/","section":"course","summary":"æœ€çµ‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæº–å‚™","tags":null,"title":"Chapter 7","type":"book"},{"authors":null,"categories":null,"content":"","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"2adf7951016803e68618153c45700bf0","permalink":"https://matsuolab.github.io/roomba_hack/course/chap8/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/roomba_hack/course/chap8/","section":"course","summary":"æœ€çµ‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ","tags":null,"title":"Chapter 8","type":"book"},{"authors":null,"categories":null,"content":"  -- Table of Contents  Program overview Courses in this program Meet your instructor    Python programming skills - Statistical concepts and how to apply them in practice - Gain experience with the Scikit, including data visualization with Plotly and data wrangling with Pandas -- Program overview å®Ÿãƒ­ãƒœãƒƒãƒˆ(roomba)ã‚’åˆ©ç”¨ã—ãŸæ¼”ç¿’ã‚’é€šã˜ã¦ã€ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®ä»•çµ„ã¿ã‹ã‚‰ã€ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»èªè­˜ãƒ»è¡Œå‹•ã«ã¤ã„ã¦ç ”ç©¶é–‹ç™ºã«å¿…è¦ãªæœ€ä½é™ã®çŸ¥è­˜ã‚„å®Ÿè£…ã‚¹ã‚­ãƒ«ã‚’ç¿’å¾—ã™ã‚‹ã€‚\nCourses in this program  Chapter 1 ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®åŸºç¤çŸ¥è­˜\n  Chapter 2 ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘ \n  Chapter 3 ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘¡\n  Chapter 4 è‡ªå¾‹ç§»å‹•\n  Chapter 5 3æ¬¡å…ƒç”»åƒèªè­˜\n  Chapter 6 è¤‡é›‘ãªãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…ãƒ»åˆ†æ•£å‡¦ç†\n  Chapter 7 æœ€çµ‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæº–å‚™\n  Chapter 8 æœ€çµ‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ\n  Meet your instructor TRAIL Admin Are there prerequisites? There are no prerequisites for the first course.\n --  Begin the course   ","date":1611446400,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1611446400,"objectID":"97ede4bb026d52eb5ee887238b8270ea","permalink":"https://matsuolab.github.io/roomba_hack/course/","publishdate":"2021-01-24T00:00:00Z","relpermalink":"/roomba_hack/course/","section":"course","summary":"rooombaã‚’ç”¨ã„ãŸå®Ÿãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ å…¥é–€","tags":null,"title":"ğŸ“Š ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ å…¥é–€","type":"book"},{"authors":null,"categories":null,"content":"è¤‡æ•°ã®ã‚»ãƒ³ã‚µã‚’çµ„ã¿åˆã‚ã›ã¦ã‚ˆã‚Šã‹ã—ã“ããƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†\nLearn å‰å›ã®æ¼”ç¿’ã§ã¯ï¼Œé€Ÿåº¦ã¨æ™‚é–“ã®æŒ‡ä»¤ã‚’ä½¿ã£ã¦ãƒ­ãƒœãƒƒãƒˆã‚’åˆ¶å¾¡ã—ã¾ã—ãŸï¼\nå‘¨å›²ã«éšœå®³ç‰©ãŒä½•ã‚‚ãªã„çŠ¶æ³ã‚„ï¼Œãƒ­ãƒœãƒƒãƒˆã®æ»‘ã‚ŠãŒãªã„ç’°å¢ƒã§ã¯ï¼Œé€Ÿåº¦ã¨æ™‚é–“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦æ€ã£ãŸé€šã‚Šã«ãƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã™ã“ã¨ãŒã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒï¼Œå®Ÿç’°å¢ƒã§ã¯ï¼Œãƒ­ãƒœãƒƒãƒˆã®å‘¨å›²ã«ã¯éšœå®³ç‰©ãŒå­˜åœ¨ã—ã¾ã™ã—ï¼Œç§»å‹•è·é›¢ã§åˆ¶å¾¡ã™ã‚‹æ–¹ãŒç›´æ„Ÿçš„ã§ã™ï¼\nå‰å›ã®æ¼”ç¿’ã®ã‚ˆã†ã«ãƒ­ãƒœãƒƒãƒˆã«é€Ÿåº¦ã¨æ™‚é–“ã‚’ä¸€å›ä¸ãˆã¦ï¼Œãã®é€šã‚Šã«å‹•ã‹ã™ã‚ˆã†ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰åˆ¶å¾¡ã§ã¯ãªãï¼Œä»Šå›ã¯ï¼Œãƒ­ãƒœãƒƒãƒˆãŒé€æ¬¡çš„ã«ã‚»ãƒ³ã‚µã®æƒ…å ±ã‚’åæ˜ ã—ã¦æŒ¯ã‚‹èˆã„ã‚’å¤‰ãˆã‚‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åˆ¶å¾¡ã‚’è¡Œãªã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼\nã‚ªãƒ‰ãƒ¡ãƒˆãƒªã®ã‚»ãƒ³ã‚µæƒ…å ±ã‚’ä½¿ã£ã¦ãƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã† ã¾ãšã¯ï¼Œãƒ­ãƒœãƒƒãƒˆã®ã‚¿ã‚¤ãƒ¤ã®å›è»¢é‡ã‹ã‚‰è¨ˆç®—ã•ã‚Œã‚‹ç§»å‹•è·é›¢ã§ã‚ã‚‹ï¼ˆãƒ›ã‚¤ãƒ¼ãƒ«ï¼‰ã‚ªãƒ‰ãƒ¡ãƒˆãƒªï¼ˆodometryï¼‰ã‚’ä½¿ã£ãŸåˆ¶å¾¡ã‚’ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼\nã‚ªãƒ‰ãƒ¡ãƒˆãƒªã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆ/odomï¼‰ã®ä¸­èº«ã‚’è¦‹ã¦ã¿ã‚ˆã† roombaã®ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã®æƒ…å ±ã¯ï¼Œ/odomãƒˆãƒ”ãƒƒã‚¯ã«publishã•ã‚Œã¦ã„ã¾ã™ï¼\nrostopic echo /odomã‚’ã—ã¦ã¿ã‚‹ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦ã©ã‚“ãªæƒ…å ±ãŒæµã‚Œã¦ã„ã‚‹ã‹ã‚ã‹ã‚Šã¾ã™ï¼ rostopic echo -n 1 /odom root@dynamics:~/roomba_hack# rostopic echo -n 1 /odom header: seq: 2115 stamp: secs: 1649692132 nsecs: 791056254 frame_id: \u0026quot;odom\u0026quot; child_frame_id: \u0026quot;base_footprint\u0026quot; pose: pose: position: x: -0.014664691872894764 y: -0.0010878229513764381 z: 0.0 orientation: x: 0.0 y: 0.0 z: 0.0056752621080531414 w: 0.9999838955703261 covariance: [0.08313143998384476, 0.00019857974257320166, 0.0, 0.0, 0.0, 0.004368376452475786, 0.00019857988809235394, 0.015032557770609856, 0.0, 0.0, 0.0, -0.26573312282562256, 0.0, 0.0, 1e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1e-05, 0.0, 0.0043683769181370735, -0.26573312282562256, 0.0, 0.0, 0.0, 6.021446704864502] twist: twist: linear: x: 0.0 y: 0.0 z: 0.0 angular: x: 0.0 y: 0.0 z: 0.0 covariance: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0] ---  \nrostopic type /odomã‚’ã—ã¦ã¿ã‚‹ã¨ï¼Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦ï¼Œnav_msgs/Odometryå‹ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ï¼ rostopic type /odom root@dynamics:~/roomba_hack# rostopic type /odom nav_msgs/Odometry  \nnav_msgs/Odometryå‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèªã—ã¦ã¿ã‚‹ã¨ï¼Œã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯poseã¨twistã§æ§‹æˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ï¼\nposeã¯ï¼ï¼ˆchild_frameã‹ã‚‰è¦‹ãŸï¼‰ãƒ­ãƒœãƒƒãƒˆã®æ¨å®šå§¿å‹¢ï¼ˆä½ç½®ã¨å›è»¢è§’ï¼‰ã‚’è¡¨ã—ã¦ã„ã¦ï¼Œcovarianceã«ã¯ãã®ä¸ç¢ºã‹ã•ã‚’è¡¨ã™å…±åˆ†æ•£ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ï¼\nä¸€æ–¹ï¼Œtwistã¯ï¼Œï¼ˆchild_frameã‹ã‚‰è¦‹ãŸï¼‰ãƒ­ãƒœãƒƒãƒˆã®é€Ÿåº¦ã‚’è¡¨ã—ã¦ã„ã¦ï¼Œposeã¨åŒæ§˜ã«covarianceã«ã¯ãã®ä¸ç¢ºã‹ã•ã‚’è¡¨ã™å…±åˆ†æ•£ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ï¼\nãªãŠï¼Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‹ã®å®šç¾©ã¯ï¼Œrosmsg info nav_msgs/Odometryã™ã‚‹ã“ã¨ã§ã‚‚ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰ç¢ºèªã§ãã¾ã™ï¼ rosmsg info nav_msgs/Odometry root@dynamics:~/roomba_hack# rosmsg info nav_msgs/Odometry std_msgs/Header header uint32 seq time stamp string frame_id string child_frame_id geometry_msgs/PoseWithCovariance pose geometry_msgs/Pose pose geometry_msgs/Point position float64 x float64 y float64 z geometry_msgs/Quaternion orientation float64 x float64 y float64 z float64 w float64[36] covariance geometry_msgs/TwistWithCovariance twist geometry_msgs/Twist twist geometry_msgs/Vector3 linear float64 x float64 y float64 z geometry_msgs/Vector3 angular float64 x float64 y float64 z float64[36] covariance  \nã‚¯ã‚©ãƒ¼ã‚¿ãƒ‹ã‚ªãƒ³(quaternion) ã•ã¦ï¼Œ/odomã®ãƒˆãƒ”ãƒƒã‚¯ã§ã¯ï¼Œãƒ­ãƒœãƒƒãƒˆã®å›è»¢è§’ã¯ã‚¯ã‚©ãƒ¼ã‚¿ãƒ‹ã‚ªãƒ³ï¼ˆquaternionï¼‰ã§è¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ï¼\nã‚¯ã‚©ãƒ¼ã‚¿ãƒ‹ã‚ªãƒ³ã¯ï¼Œæ—¥æœ¬èªã§ã¯å››å…ƒæ•°ã¨å‘¼ã°ã‚Œï¼Œ3æ¬¡å…ƒç©ºé–“ä¸Šã§ã®å›è»¢è§’ã‚’è¡¨ç¾ã™ã‚‹æ–¹æ³•ã®ä¸€ã¤ã§ï¼Œ4ã¤ã®è¦ç´ ã‚’æŒã¤ãƒ™ã‚¯ãƒˆãƒ«ã§è¡¨ç¾ã•ã‚Œã¾ã™ï¼\nã‚¯ã‚©ãƒ¼ã‚¿ãƒ‹ã‚ªãƒ³ã«ã‚ˆã‚‹3æ¬¡å…ƒå›è»¢ã®è¡¨ç¾ã¯ï¼Œè§’åº¦ã‚’é€£ç¶šçš„ã«ã‹ã¤ç°¡æ½”ã«è¡¨ç¾ã§ãã‚‹ãŸã‚ROSã§ã¯ã‚ˆãç”¨ã„ã‚‰ã‚Œã¾ã™ï¼ˆãã®ä»–ã«ã¯ï¼Œã‚ªã‚¤ãƒ©ãƒ¼è§’ã«ã‚ˆã‚‹è¡¨ç¾ã‚„å›è»¢è¡Œåˆ—ã«ã‚ˆã‚‹è¡¨ç¾ãŒã‚ã‚Šã¾ã™ï¼‰ï¼\nãã‚Œãã‚Œã®å›è»¢è§’ã«é–¢ã™ã‚‹è¡¨ç¾ã®ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚’èª¿ã¹ã¦ã¿ã¾ã—ã‚‡ã†ï¼ˆã€Œã‚¸ãƒ³ãƒãƒ«ãƒ­ãƒƒã‚¯ã€ãªã©ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§èª¿ã¹ã‚‹ã¨ã‚ˆã‚Šã‚ˆãç†è§£ã§ãã‚‹ã¨æ€ã„ã¾ã™ï¼‰ï¼\nã‚¯ã‚©ãƒ¼ã‚¿ãƒ‹ã‚ªãƒ³ã‹ã‚‰ã‚ªã‚¤ãƒ©ãƒ¼è§’ã¸ã¯ï¼Œtfãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®tf.transformations.euler_from_quaternionã‚’ä½¿ã†ã“ã¨ã§å¤‰æ›ã§ãã¾ã™ï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰ï¼\nã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒï¼ˆsubscriber)ã®ä»•çµ„ã¿ã‚’çŸ¥ã‚ã† ãã‚Œã§ã¯ï¼Œã‚ªãƒ‰ãƒ¡ãƒˆãƒª/odomã®æƒ…å ±ã‚’ä½¿ã£ãŸåˆ¶å¾¡ã®å®Ÿè£…ã®ä¾‹ã¨ã—ã¦navigation_tutorialãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸­ã®simple_control2.pyã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼ˆgithubï¼‰ï¼\nå‰å›ã¾ã§ã«å¼·èª¿ã•ã‚Œã¦ããŸé€šã‚Šï¼ŒROSã¯éåŒæœŸåˆ†æ•£ã®ã‚·ã‚¹ãƒ†ãƒ ã‚’ç°¡å˜ã«ä½œã‚‹ã“ã¨ãŒã§ãã‚‹ã®ãŒç‰¹å¾´ã§ã™ï¼ ãã®ãŸã‚ï¼Œãƒ­ãƒœãƒƒãƒˆã‹ã‚‰éåŒæœŸã«é€ã‚‰ã‚Œã¦ãã‚‹/odomã®æƒ…å ±ã‚’ã†ã¾ãæ‰±ã†ã“ã¨ãŒé‡è¦ã§ã™ï¼\nå®Ÿè£…ä¾‹ã«ã‚ã‚‹ã‚ˆã†ã«ï¼ŒPythonã«ã‚ˆã‚‹ãƒãƒ¼ãƒ‰ã®å®Ÿè£…ã§ã¯ï¼Œã‚¯ãƒ©ã‚¹ã¨ã—ã¦å®šç¾©ã™ã‚‹ã®ãŒã‚ã‹ã‚Šã‚„ã™ã„æ–¹æ³•ã§ã—ã‚‡ã†ï¼\nå®Ÿè£…ä¾‹ã§ã¯ï¼ŒSimpleControlllerã‚¯ãƒ©ã‚¹ã¨ã—ã¦ï¼Œsimple_controllerã¨ã„ã†ãƒãƒ¼ãƒ‰ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ï¼ ä»¥ä¸‹ã®ã‚ˆã†ã«ï¼Œãƒãƒ¼ãƒ‰ã‚’åˆæœŸåŒ–ã™ã‚‹éš›ã«ï¼Œã‚³ãƒãƒ³ãƒ‰ã‚’/cmd_velãƒˆãƒ”ãƒƒã‚¯ã«é€ä¿¡ã™ã‚‹ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ£ï¼ˆpublisher)ã¨ï¼Œ/odomã‚’å—ä¿¡ã™ã‚‹ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ(subscriber)ã‚’ä½œæˆã—ã¦ã„ã¾ã™ï¼\nclass SimpleController: def __init__(self): rospy.init_node('simple_controller', anonymous=True) # Publisher self.cmd_vel_pub = rospy.Publisher('/cmd_vel', Twist, queue_size=10) # Subscriber odom_sub = rospy.Subscriber('/odom', Odometry, self.callback_odom) self.x = None self.y = None self.yaw = None while self.x is None: rospy.sleep(0.1)  ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ£ã®ä½¿ã„æ–¹ã¯å‰å›ã®simple_control.pyã®å®Ÿè£…ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼\nãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ£ã¨åŒæ§˜ã«ï¼Œã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒã¯rospyã®Subscriberã‚’ç”¨ã„ã¦ä½œæˆã§ãã¾ã™ï¼ ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒã®ç‰¹å¾´ã¨ã—ã¦ï¼Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡ã—ãŸæ™‚ã®å‡¦ç†ã§ã‚ã‚‹ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆcallbackï¼‰ã‚’å®šç¾©ã§ãã¾ã™ï¼\nã“ã®å®Ÿè£…ä¾‹ã§ã¯ï¼Œself.callback_odomã¨ã—ã¦å®šç¾©ã•ã‚Œã¦ãŠã‚Šï¼Œã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å±æ€§ï¼ˆself.x, self.y, self.yawï¼‰ã‚’ï¼Œå—ä¿¡ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§å¤‰æ›´ã™ã‚‹ã‚ˆã†ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ãªã£ã¦ã„ã¾ã™ï¼\ndef callback_odom(self, data): self.x = data.pose.pose.position.x self.y = data.pose.pose.position.y self.yaw = self.get_yaw_from_quaternion(data.pose.pose.orientation)  ã¤ã¾ã‚Šï¼Œself.xã«ã¯/odomã‹ã‚‰å—ä¿¡ã—ãŸä½ç½®ã®xåº§æ¨™ï¼Œself.yã«ã¯ä½ç½®ã®yåº§æ¨™ï¼Œself.yawã«ã¯ï¼Œå›è»¢è§’ã®yawã‚’æ ¼ç´ã—ã¦ã„ã¾ã™ï¼\nã‚¯ã‚©ãƒ¼ã‚¿ãƒ‹ã‚ªãƒ³ã¨ã—ã¦å—ä¿¡ã—ãŸå§¿å‹¢ã®å›è»¢è§’ã®yawæˆåˆ†ã‚’å–ã‚Šå‡ºã™ãŸã‚ã®self.get_yaw_from_quaternionã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ï¼ˆã‚ªã‚¤ãƒ©ãƒ¼è§’ã¯roll, pitch, yawã®é †ã§è¿”ã£ã¦ãã‚‹ã®ã§e[2]ã§yawã‚’å–å¾—ã—ã¦ã„ã¾ã™ï¼‰ï¼\ndef get_yaw_from_quaternion(self, quaternion): e = tf.transformations.euler_from_quaternion( (quaternion.x, quaternion.y, quaternion.z, quaternion.w)) return e[2]  ã“ã‚Œã‚‰ã®ã‚»ãƒ³ã‚µã®å€¤ã‚’ä½¿ã†ã“ã¨ã§ï¼Œä»¥ä¸‹ã®ã‚ˆã†ã«ï¼ŒæŒ‡å®šã—ãŸè·é›¢ãƒ­ãƒœãƒƒãƒˆãŒç§»å‹•ã™ã‚‹ã¾ã§ç›´é€²ã•ã›ç¶šã‘ãŸã‚Šï¼ŒæŒ‡å®šã—ãŸè§’åº¦ã¾ã§ãƒ­ãƒœãƒƒãƒˆãŒå›è»¢ã™ã‚‹ã¾ã§å›è»¢ã•ã›ç¶šã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼\nç›´é€²\ndef go_straight(self, dis, velocity=0.3): vel = Twist() x0 = self.x y0 = self.y while(np.sqrt((self.x-x0)**2+(self.y-y0)**2)\u0026lt;dis): vel.linear.x = velocity vel.angular.z = 0.0 self.cmd_vel_pub.publish(vel) rospy.sleep(0.1) self.stop()  å³å›è»¢\ndef turn_right(self, yaw, yawrate=-0.5): vel = Twist() yaw0 = self.yaw while(abs(self.yaw-yaw0)\u0026lt;np.deg2rad(yaw)): vel.linear.x = 0.0 vel.angular.z = yawrate self.cmd_vel_pub.publish(vel) rospy.sleep(0.1) self.stop()  å·¦å›è»¢\ndef turn_left(self, yaw, yawrate=0.5): vel = Twist() yaw0 = self.yaw while(abs(self.yaw-yaw0)\u0026lt;np.deg2rad(yaw)): vel.linear.x = 0.0 vel.angular.z = yawrate self.cmd_vel_pub.publish(vel) rospy.sleep(0.1) self.stop()  ãã‚Œã§ã¯ï¼Œã‚ªãƒ‰ãƒ¡ãƒˆãƒªã‚’ä½¿ã£ã¦å®Ÿéš›ã«ãƒ­ãƒœãƒƒãƒˆã‚’åˆ¶å¾¡ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼\næ¼”ç¿’ ã€jetsonãƒ»é–‹ç™ºãƒã‚·ãƒ³ã€‘ãã‚Œãã‚Œdockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹• ï¼ jetsonã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•\n(é–‹ç™ºPC):~$ ssh roomba_dev1 (jetson):~$ cd ~/group_a/roomba_hack (jetson):~/group_a/roomba_hack ./RUN-DOCKER-CONTAINER.sh (jetson)(docker):~/roomba_hack#  é–‹ç™ºPCã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•\n(é–‹ç™ºPC):~$ cd ~/group_a/roomba_hack (é–‹ç™ºPC):~/group_a/roomba_hack ./RUN-DOCKER-CONTAINER.sh 192.168.10.7x (é–‹ç™ºPC)(docker):~/roomba_hack#   ã€jetsonã€‘ROSãƒã‚¹ã‚¿ã€å„ç¨®ãƒãƒ¼ãƒ‰ã‚’èµ·å‹• (jetson)(docker):~/roomba_hack# roslaunch roomba_bringup bringup.launch   ROSãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¯è¦–åŒ– ã€é–‹ç™ºPCã€‘topicã®ç¢ºèª /odomã®å‹ã‚’ç¢ºèª\n(é–‹ç™ºPC)(docker):~/roomba_hack# rostopic type /odom  /odomã®ä¸­èº«ã‚’ç¢ºèª\n(é–‹ç™ºPC)(docker):~/roomba_hack# rostopic echo /odom   ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã‚’ä½¿ã£ãŸãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åˆ¶å¾¡ simple_control2.pyã‚’å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†ï¼\né–‹ç™ºPCã§teleopã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã—ã‚‡ã†\n(é–‹ç™ºPC)(docker):~/roomba_hack# roslaunch roomba_teleop teleop.launch  ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å‹•ã‹ã™ã¨ãã«ã¯ï¼Œã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã®Yãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã‹ã‚‰Bãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦autoãƒ¢ãƒ¼ãƒ‰ã«ã—ã¦ãŠãã¾ã—ã‚‡ã†ï¼\n1ãƒ¡ãƒ¼ãƒˆãƒ«ã»ã©å‰ã«é€²ã‚“ã ã‚ã¨ï¼Œå·¦ã«90åº¦ç¨‹åº¦æ—‹å›ã—ï¼Œå³ã«90åº¦ç¨‹åº¦æ—‹å›ã—ãŸã‚‰æˆåŠŸã§ã™ï¼\n(é–‹ç™ºPC)(docker):~/roomba_hack# rosrun navigation_tutorial simple_control2.py  try it! simple_control2.pyã®ä¸­èº«ã‚’èª­ã‚“ã§ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¦ã¿ã‚ˆã†\n","date":1649116800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1649116800,"objectID":"2ee7ed9f0716848dbd6ffe877377e500","permalink":"https://matsuolab.github.io/roomba_hack/course/chap3/sensing2/","publishdate":"2022-04-05T00:00:00Z","relpermalink":"/roomba_hack/course/chap3/sensing2/","section":"course","summary":"è¤‡æ•°ã®ã‚»ãƒ³ã‚µã‚’çµ„ã¿åˆã‚ã›ã¦ã‚ˆã‚Šã‹ã—ã“ããƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†\n","tags":null,"title":"ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘¡","type":"book"},{"authors":null,"categories":null,"content":"Learn ã“ã“ã¾ã§ãƒˆãƒ”ãƒƒã‚¯ã‚’ä½¿ã£ãŸé€šä¿¡ã‚’ä½¿ã£ã¦ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã—ã¦ãã¾ã—ãŸï¼ ãƒˆãƒ”ãƒƒã‚¯é€šä¿¡ã¯ï¼Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºç‰ˆ(publishï¼Œé…ä¿¡ã¨ã‚‚è¨³ã•ã‚Œã‚‹)ãƒ»è³¼èª­ï¼ˆsubscribeï¼‰ã™ã‚‹ã“ã¨ã§é€šä¿¡ã™ã‚‹ï¼Œç›¸æ‰‹ã‚’ä»®å®šã—ãªã„éåŒæœŸãªé€šä¿¡æ–¹æ³•ã§ã—ãŸï¼\nã—ã‹ã—ï¼Œã‚‚ã£ã¨è¤‡é›‘ãªã‚·ã‚¹ãƒ†ãƒ ã‚’çµ„ã‚€å ´åˆã«ã¯ï¼Œã€Œç›¸æ‰‹ã®å‡¦ç†ã®çµæœã‚’å‘¼ã³å‡ºã—å´ã§å—ã‘å–ã£ã¦çŸ¥ã‚ŠãŸã„ã€ãªã©æ§˜ã€…ãªå ´åˆãŒè€ƒãˆã‚‰ã‚Œã¾ã™ï¼\nã“ã®ã‚ˆã†ãªã‚ˆã‚Šè¤‡é›‘ãªé€šä¿¡ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®é€šä¿¡æ–¹å¼ã¨ã—ã¦ï¼ŒROSã«ã¯ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆserviceï¼‰ã¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆactionlibï¼‰ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ï¼\nservice ã“ã‚Œã¾ã§åˆ©ç”¨ã—ã¦ããŸãƒˆãƒ”ãƒƒã‚¯é€šä¿¡ã¯ï¼Œé€šä¿¡ã®ç›¸æ‰‹ã‚’ä»®å®šã—ãªã„ï¼ˆç›¸æ‰‹ãŒã„ã‚ˆã†ã¨ã„ã¾ã„ã¨é–¢ä¿‚ãªã„ï¼‰ãŸã‚ï¼Œãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ç‰¹æœ‰ãªéåŒæœŸé€šä¿¡ãƒ»å‡¦ç†ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ç°¡å˜ãªæ–¹æ³•ã§ã—ãŸï¼\nä¸€æ–¹ã§ï¼Œä»–ã®ãƒãƒ¼ãƒ‰ã«å¯¾ã—ã¦ã€Œç‰¹å®šã®å‡¦ç†ã®ä¾é ¼ã‚’ã—ã¦ï¼Œãã®çµæœã‚’å¾…ã¡ãŸã„ã€å ´åˆãªã©ï¼ŒåŒæœŸçš„ãƒ»åŒæ–¹å‘ãªé€šä¿¡ãŒå¿…è¦ã«ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ï¼ ä¾‹ãˆã°ï¼Œã‚ã‚‹ãƒãƒ¼ãƒ‰ã®è¨­å®šã‚’å¤‰æ›´ã‚’ã—ã¦ï¼Œãã‚ŒãŒæˆåŠŸã—ãŸã‹ã©ã†ã‹ã‚’çŸ¥ã‚ŠãŸã„å ´åˆãªã©ã«ä½¿ãˆã¾ã™ï¼ ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ã£ãŸé€šä¿¡ã¯ï¼Œã€Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ»ã‚µãƒ¼ãƒã€å‹ã®é€šä¿¡ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µãƒ¼ãƒãƒ¢ãƒ‡ãƒ«, client-server modelï¼‰ã¨ãªã‚Šï¼Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒã‚µãƒ¼ãƒã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚‹ã¨ï¼Œã‚µãƒ¼ãƒãŒãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ã‚ˆã†ãªä»•çµ„ã¿ã«ãªã£ã¦ã„ã¾ã™ï¼\npythonã§ã¯rospy.serviceã‚’ä½¿ã£ã¦ã‚µãƒ¼ãƒã‚’ï¼Œrospy.service_proxyã‚’ä½¿ã£ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç°¡å˜ã«å®Ÿè£…ã§ãã¾ã™ï¼ˆå‚è€ƒURLï¼‰ï¼\nã¾ãŸï¼Œã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã¯\nrosservice call [service] [args]  ã¨ã—ã¦ï¼Œç°¡å˜ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆã§ãã¾ã™ã—ï¼Œã‚·ã‚¹ãƒ†ãƒ ä¸Šã«å­˜åœ¨ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã®ä¸€è¦§ã¯\nrosservice list  ã¨ã™ã‚‹ã“ã¨ã§è¡¨ç¤ºã§ãã¾ã™ï¼ã‚ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã©ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹ã¯ï¼Œ\nrosservice type [service]  ã§èª¿ã¹ã‚‰ã‚Œã¾ã™ï¼\nactionlib ã“ã“ã¾ã§ï¼Œãƒˆãƒ”ãƒƒã‚¯é€šä¿¡ã‚’ä½¿ã†ã“ã¨ã§ç›¸æ‰‹ã‚’ä»®å®šã—ãªã„éåŒæœŸé€šä¿¡ã‚’ï¼Œã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ã£ãŸé€šä¿¡ã‚’è¡Œã†ã“ã¨ã§ç›¸æ‰‹ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å¾…ã¤åŒæœŸçš„ãªé€šä¿¡ã‚’å®Ÿç¾ã§ãã‚‹ã“ã¨ã‚’è¦‹ã¦ãã¾ã—ãŸï¼\nã‚µãƒ¼ãƒ“ã‚¹ã«ã‚ˆã‚‹é€šä¿¡ã§ã¯ï¼Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ã‚µãƒ¼ãƒã‹ã‚‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å¾…ã¤ãŸã‚ï¼Œã‚µãƒ¼ãƒã§é•·ã„æ™‚é–“ãŒã‹ã‹ã‚‹ã‚ˆã†ãªå‡¦ç†ã‚’è¡Œã†ï¼ˆè¨ˆç®—é‡ãŒå¤§ãã„ï¼Œã¾ãŸã¯ï¼Œç§»å‹•ã«æ™‚é–“ãŒã‹ã‹ã‚‹ãªã©ï¼‰å ´åˆã«ã¯ï¼Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®å‡¦ç†ãŒé•·ã„é–“åœæ­¢ã—ã¦ã—ã¾ã†ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã™ï¼\nãã®ãŸã‚ï¼Œå‡¦ç†ã®å‘¼ã³å‡ºã—å´ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã›ãšã«ï¼Œã‹ã¤ï¼Œå‡¦ç†ã®çµæœï¼ˆã‚„é€”ä¸­çµŒéï¼‰ã‚’çŸ¥ã‚Œã‚‹ã‚ˆã†ãªéåŒæœŸé€šä¿¡ãŒæ¬²ã—ããªã‚Šã¾ã™ï¼ ã“ã®è¦æ±‚ã‚’æº€ãŸã™ã®ãŒï¼ŒROSã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³(actionlib)ã§ã™ï¼\nactionlibã¯ï¼Œå®Ÿã¯ãƒˆãƒ”ãƒƒã‚¯é€šä¿¡ã®çµ„ã¿åˆã‚ã›ã¨ã—ã¦æ§‹æˆã•ã‚Œã¦ãŠã‚Šï¼Œgoalï¼ˆå‘½ä»¤ï¼‰ï¼Œresultï¼ˆå‡¦ç†ã®çµæœï¼‰ï¼Œfeedbackï¼ˆé€”ä¸­çµŒéï¼‰ï¼Œstatusï¼ˆã‚µãƒ¼ãƒã®çŠ¶æ…‹ï¼‰ï¼Œcancelï¼ˆå‘½ä»¤ã®å–ã‚Šæ¶ˆã—ï¼‰ã®5ã¤ã®ãƒˆãƒ”ãƒƒã‚¯ã‹ã‚‰ãªã‚Šã¾ã™ï¼ ã“ã®ã‚ãŸã‚Šã®ä»•æ§˜ã¯ï¼Œqiitaã®ROSè¬›åº§ãŒè©³ã—ã„ã®ã§å‚ç…§ã—ã¦ãã ã•ã„ï¼\npythonã§ã¯ï¼Œactionlibã®ã‚µãƒ¼ãƒã‚„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚‚ï¼Œ\nimport actionlib  ã—ãŸã®ã¡ã«ï¼Œä»–ã®é€šä¿¡æ–¹å¼ã¨åŒæ§˜ã«actionlib.SimpleActionServerã¨ã—ã¦ï¼Œç°¡å˜ã«ä½œæˆã§ãã¾ã™ï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰ï¼\nä»Šå›ã®æ¼”ç¿’ã§ã¯ï¼Œç°¡å˜ã®ãŸã‚action serverã®ä½œæˆã¯è¡Œã„ã¾ã›ã‚“ï¼ å¤‰ã‚ã‚Šã«ï¼Œç§»å‹•ã®ãŸã‚ã®actionã¨ã—ã¦ï¼Œmove_baseãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸­ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹move_baseã¨ã„ã†actionã‚’ä½¿ã†ã“ã¨ã«ã—ã¾ã—ã‚‡ã†ï¼\nå®Ÿã¯ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯\nroslaunch navigation_tutorial navigation.launch  ã—ã¦move_baseãƒãƒ¼ãƒ‰ã‚’èµ·å‹•ã—ãŸéš›ã«æ—¢ã«åˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã—ãŸï¼ˆã“ã‚Œã¾ã§ã¯ï¼Œãã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸­ã§ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒã¨ã—ã¦å®šç¾©ã•ã‚ŒãŸmove_base_simple/goalã¨ã„ã†ãƒˆãƒ”ãƒƒã‚¯ã«publishã™ã‚‹ã“ã¨ã§ç§»å‹•ã‚’ã—ã¦ã„ã¾ã—ãŸï¼‰ï¼\nmove_baseã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è©³ç´°ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã¦ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ï¼\nåŒæ§˜ã«ï¼Œaction clientã‚‚actionlib.SimpleActionClientã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ç°¡å˜ã«ä½œæˆã§ãã¾ã™ï¼\nä¾‹ãˆã°ï¼Œmove_baseã®action clientã®å®Ÿè£…ã™ã‚‹éš›ã«ã¯ï¼Œ\nimport actionlib import tf from move_base_msgs.msg import MoveBaseAction, MoveBaseGoal from geometry_msgs.msg import Quaternion action_client = actionlib.SimpleActionClient('move_base', MoveBaseAction) action_client.wait_for_server() # action serverã®æº–å‚™ãŒã§ãã‚‹ã¾ã§å¾…ã¤ goal = MoveBaseGoal() # goalã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å®šç¾© goal.target_pose.header.frame_id = 'map' # ãƒãƒƒãƒ—åº§æ¨™ç³»ã§ã®ã‚´ãƒ¼ãƒ«ã¨ã—ã¦è¨­å®š goal.target_pose.header.stamp = rospy.Time.now() # ç¾åœ¨æ™‚åˆ» # ã‚´ãƒ¼ãƒ«ã®å§¿å‹¢ã‚’æŒ‡å®š goal.target_pose.pose.position.x = X goal.target_pose.pose.position.y = Y q = uaternion_from_euler(0, 0, YAW) # å›è»¢ã¯quartanionã§è¨˜è¿°ã™ã‚‹ã®ã§å¤‰æ› goal.target_pose.pose.orientation = Quaternion(q[0], q[1], q[2], q[3]) action_client.send_goal(goal) # ã‚´ãƒ¼ãƒ«ã‚’å‘½ä»¤  ã®ã‚ˆã†ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®send_goalãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚´ãƒ¼ãƒ«ã‚’æŒ‡å®šã§ãã¾ã™ï¼\nãã®å¾Œï¼Œ\naction_client.wait_for_result(rospy.Duration(30))  ã¨ã™ã‚‹ã¨ï¼ŒçµæœãŒè¿”ã£ã¦ãã‚‹ã¾ã§ï¼ˆã“ã®å ´åˆ30ç§’é–“ï¼‰ï¼Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®å‡¦ç†ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã§ãã¾ã™ã—ï¼Œ\nresult = action_client.wait_for_result(rospy.Duration(30))  ã¨ã™ã‚‹ã“ã¨ã§ï¼Œresultå¤‰æ•°ã«å‡¦ç†ã®çµæœãŒæ ¼ç´ã•ã‚Œï¼Œç¢ºèªã§ãã¾ã™ï¼\næ¼”ç¿’ ã€jetsonãƒ»é–‹ç™ºãƒã‚·ãƒ³ã€‘èµ·å‹•æº–å‚™ cd roomba_hack git fetch git checkout feature/integrate (jetson) ./RUN-DOCKER-CONTAINER.sh (é–‹ç™ºãƒã‚·ãƒ³) ./RUN-DOCKER-CONTAINER.sh 192.168.10.7x   ã€é–‹ç™ºãƒã‚·ãƒ³ã€‘scriptãƒ™ãƒ¼ã‚¹ã®navigationã‚’å®Ÿè¡Œã—ã¦ã¿ã‚‹ (é–‹ç™ºãƒã‚·ãƒ³)(docker) roslaunch navigation_turtorial navigation.launch (é–‹ç™ºãƒã‚·ãƒ³)(docker) rosrun navigation_turtorial topic_goal.py (é–‹ç™ºãƒã‚·ãƒ³)(docker) rosrun navigation_turtorial action_goal.py   ã€é–‹ç™ºãƒã‚·ãƒ³ã€‘RealSenseã§æ¤œå‡ºã—ãŸéšœå®³ç‰©ã‚’ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—ã«è¿½åŠ ã—ã¦ã¿ã‚ˆã† (é–‹ç™ºãƒã‚·ãƒ³)(docker) roslaunch three-dimensions_tutorial detection_pc.launch   ï¼ˆç·åˆèª²é¡Œï¼‰éšœå®³ç‰©ã‚’é¿ã‘ãªãŒã‚‰navigationã™ã‚‹ Lidarã«æ˜ ã‚‰ãªã„ç‰©ä½“ã‚‚ç”»åƒãƒ™ãƒ¼ã‚¹ã§æ¤œå‡ºã—ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—ã«è¿½åŠ ã™ã‚‹ã“ã¨ã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ™‚ã«ã¶ã¤ã‹ã‚‰ãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚\nãƒ’ãƒ³ãƒˆ\n ç‰©ä½“æ¤œå‡ºçµæœã«åŸºã¥ã„ã¦ç‰©ä½“éƒ¨åˆ†ä»¥å¤–ã‚’ãƒã‚¹ã‚¯ã—ãŸãƒ‡ãƒ—ã‚¹ç”»åƒã‚’publishã™ã‚‹ depth2pc.launchã§ãã‚Œã‚’subscribeã—ã€point(cloud)ã«å¤‰æ›ã™ã‚‹ å¤‰æ›ã•ã‚ŒãŸpointã‹ã‚‰mapåº§æ¨™ç³»ã§ã®ä½ç½®ã‚’å–å¾—ã™ã‚‹ costmapã«åæ˜ ã™ã‚‹ move_baseã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ã¦ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã—ã‚ˆã†ï¼  ã™ã‚‹ã¨actionãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ãŸå ´åˆã‚„ï¼ŒKeyboardInterruptã•ã‚ŒãŸå ´åˆã«cancel_goalãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã“ã¨ã§actionã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã§ãã‚‹ã‚ˆã†ã«æ‹¡å¼µã§ãã‚‹ã¯ãšã§ã™ï¼    ã•ã‚‰ã«ï¼ŒPyTorchã‚’ä½¿ç”¨ã—ãŸè‡ªä½œã®åˆ†é¡å™¨ã‚„ãƒãƒƒãƒˆä¸Šã®åˆ†é¡å™¨ã‚’ã‚·ã‚¹ãƒ†ãƒ ã«çµ„ã¿è¾¼ã‚“ã§ï¼ˆä¾‹ãˆã°ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ãƒ‡ãƒ«ãªã©ï¼‰ï¼Œã‚ˆã‚Šã‚ˆãå‹•ä½œã™ã‚‹ã‚ˆã†ã«æ”¹è‰¯ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼\n","date":1642809600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1642809600,"objectID":"ba96fee21f24c18e95f236953fe70e74","permalink":"https://matsuolab.github.io/roomba_hack/course/chap6/service-actionlib/","publishdate":"2022-01-22T00:00:00Z","relpermalink":"/roomba_hack/course/chap6/service-actionlib/","section":"course","summary":"","tags":null,"title":"serviceã¨actionlib","type":"book"},{"authors":null,"categories":null,"content":"Learn ä»Šå›ã¯RealSenseD435ã¨ã„ã†RGBDã‚«ãƒ¡ãƒ©ã‚’ç”¨ã„ã¦ä¸‰æ¬¡å…ƒç”»åƒå‡¦ç†ã‚’è¡Œã£ã¦ã„ãã¾ã—ã‚‡ã†ã€‚\nRGBDã‚«ãƒ¡ãƒ©ã«ã¤ã„ã¦ RGBDã‚«ãƒ¡ãƒ©ã¨ã¯ã€ã‚«ãƒ©ãƒ¼ã®ä»–ã«ãƒ‡ãƒ—ã‚¹(æ·±åº¦)ã‚’å–å¾—ã§ãã‚‹ã‚«ãƒ¡ãƒ©ã®ã“ã¨ã§ã™ã€‚ è¤‡é›‘ãªå‹•ä½œã‚’è¡Œã†ãƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã™éš›ã«ã¯ä¸‰æ¬¡å…ƒç©ºé–“ã®æŠŠæ¡ãŒé‡è¦ã¨ãªã‚Šã€RGBDã‚«ãƒ¡ãƒ©ã¯ã‚ˆãç”¨ã„ã‚‰ã‚Œã¾ã™ã€‚ æ¯”è¼ƒçš„å®‰ä¾¡ã§ã‚ˆãåˆ©ç”¨ã•ã‚Œã‚‹RGBDã‚«ãƒ¡ãƒ©ã¨ã—ã¦ã€Intelç¤¾è£½ã®RealSenseã‚„Microsoftç¤¾è£½ã®Xtionãªã©ãŒã‚ã‚Šã¾ã™ã€‚\nRealSense ä»Šå›ã¯RGBDã‚«ãƒ¡ãƒ©ã¨ã—ã¦RealSenseD435ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚\nROSã§ç”¨ã„ã‚‹éš›ã«ã¯æ¨™æº–ã®ãƒ©ãƒƒãƒ‘ãƒ¼(https://github.com/IntelRealSense/realsense-ros)ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚\nroslaunch realsense2_camera rs_camera.launchã‚’è¡Œã†ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒˆãƒ”ãƒƒã‚¯ã¨ã—ã¦ RGBç”»åƒã®/camera/color/image_rawã€ ãƒ‡ãƒ—ã‚¹ç”»åƒã®/camera/depth/image_raw ãŒåˆ©ç”¨ã§ãã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒˆãƒ”ãƒƒã‚¯ã¯ã„ãšã‚Œã‚‚sensor_msgs/Imageå‹ã§ã™ã€‚\nRealSenseã¯ç‰©ç†çš„ã«RGBç”»åƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ãƒ‡ãƒ—ã‚¹ç”»åƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒé›¢ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã“ã‚Œã‚‰2ã¤ã®ãƒˆãƒ”ãƒƒã‚¯ã¯ã„ãšã‚Œã‚‚ç”»åƒãƒ‡ãƒ¼ã‚¿ã§ã¯ã‚ã‚‹ã‚‚ã®ã®ã€ãƒ”ã‚¯ã‚»ãƒ«ã®ä½ç½®é–¢ä¿‚ãŒå¯¾å¿œã—ã¦ãŠã‚‰ãšãã®ã¾ã¾ã ã¨ã†ã¾ãç”»åƒå‡¦ç†ã«ç”¨ã„ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ãŒã€èµ·å‹•æ™‚ã«align:=trueã‚’æŒ‡å®šã™ã‚‹ã¨ã€ãƒ‡ãƒ—ã‚¹ç”»åƒã‚’RGBç”»åƒã®ãƒ”ã‚¯ã‚»ãƒ«ã«å¯¾å¿œã™ã‚‹ã‚ˆã†ã«å¤‰æ›ã•ã‚ŒãŸ/camera/aligned_depth_to_color/image_rawãƒˆãƒ”ãƒƒã‚¯ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\nç‰©ä½“æ¤œå‡º ã¾ãšã¯RGBç”»åƒ/camera/color/image_rawã®ã¿ã‚’ç”¨ã„ã¦ä¸‰æ¬¡å…ƒã§ã¯ãªã„ç”»åƒæ¤œå‡ºã‚’è¡Œã£ã¦ã„ãã¾ã—ã‚‡ã†ã€‚\nä»¥ä¸‹ã¯/camera/color/image_rawã‚’Subscribeã—ã€ç‰©ä½“æ¤œå‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã‚ã‚‹YOLOv3ã«å…¥åŠ›ã—ã€ãã®çµæœã‚’bounding boxã¨ã—ã¦æç”»ã—ã€/detection_resultã¨ã—ã¦Publishã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚\n#!/usr/bin/env python3 import rospy from sensor_msgs.msg import Image from cv_bridge import CvBridge from pytorchyolo import detect, models import matplotlib.pyplot as plt import matplotlib.patches as patches import cv2 import copy class ObjectDetection: def __init__(self): rospy.init_node('object_detection', anonymous=True) # Publisher self.detection_result_pub = rospy.Publisher('/detection_result', Image, queue_size=10) # Subscriber rgb_sub = rospy.Subscriber('/camera/color/image_raw', Image, self.callback_rgb) self.bridge = CvBridge() self.rgb_image = None def callback_rgb(self, data): cv_array = self.bridge.imgmsg_to_cv2(data, 'bgr8') cv_array = cv2.cvtColor(cv_array, cv2.COLOR_BGR2RGB) self.rgb_image = cv_array def process(self): path = \u0026quot;/root/roomba_hack/catkin_ws/src/three-dimensions_tutorial/yolov3/\u0026quot; # load category with open(path+\u0026quot;data/coco.names\u0026quot;) as f: category = f.read().splitlines() # prepare model model = models.load_model(path+\u0026quot;config/yolov3.cfg\u0026quot;, path+\u0026quot;weights/yolov3.weights\u0026quot;) while not rospy.is_shutdown(): if self.rgb_image is None: continue # inference tmp_image = copy.copy(self.rgb_image) boxes = detect.detect_image(model, tmp_image) # [[x1, y1, x2, y2, confidence, class]] # plot bouding box for box in boxes: x1, y1, x2, y2 = map(int, box[:4]) cls_pred = int(box[5]) tmp_image = cv2.rectangle(tmp_image, (x1, y1), (x2, y2), (0, 255, 0), 3) tmp_image = cv2.putText(tmp_image, category[cls_pred], (x1, y1), cv2.FONT_HERSHEY_SIMPLEX, 1.0, (0, 255, 0), 2) # publish image tmp_image = cv2.cvtColor(tmp_image, cv2.COLOR_RGB2BGR) detection_result = self.bridge.cv2_to_imgmsg(tmp_image, \u0026quot;bgr8\u0026quot;) self.detection_result_pub.publish(detection_result) if __name__ == '__main__': od = ObjectDetection() try: od.process() except rospy.ROSInitException: pass  ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã§sensor_msgs/Imageå‹ã‚’np.ndarrayå‹ã«å¤‰æ›ã™ã‚‹ãŸã‚ã«\ncv_array = self.bridge.imgmsg_to_cv2(data, 'bgr8') cv_array = cv2.cvtColor(cv_array, cv2.COLOR_BGR2RGB)  ã¨ã„ã†sensor_msgs/Imageå‹ç‰¹æœ‰ã®å‡¦ç†ã‚’è¡Œã£ã¦ã¾ã™ãŒã€Subscriberã‚’ä½œæˆã—ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã§ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹ã¨ã„ã†åŸºæœ¬çš„ãªå‡¦ç†ã®æµã‚Œã¯scanãªã©ã®ä»–ã®ã‚»ãƒ³ã‚µã¨åŒã˜ã§ã™ã€‚\nã“ã“ã§æ³¨æ„ã—ã¦ã»ã—ã„ã®ã¯YOLOã®æ¨è«–éƒ¨åˆ†ã‚’ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°å†…ã§è¡Œã£ã¦ã„ãªã„ã“ã¨ã§ã™ã€‚ ä¸€è¦‹ã€æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãŒå…¥ã£ã¦ãã‚‹ã¨ãã®ã¿ã«æ¨è«–ã‚’å›ã™ã“ã¨ã¯åˆç†çš„ã«è¦‹ãˆã¾ã™ãŒã€ã‚»ãƒ³ã‚µã®å…¥åŠ›ã«å¯¾ã—ã¦ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°å†…ã®å‡¦ç†ãŒé‡ã„ã¨ã‚»ãƒ³ã‚µã®å…¥åŠ›ãŒã©ã‚“ã©ã‚“é…ã‚Œã¦ã„ã£ã¦ã—ã¾ã„ã¾ã™ã€‚ ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°å†…ã§ã¯ã‚»ãƒ³ã‚µãƒ‡ãƒ¼ã‚¿ã®æœ€ä½é™ã®å‡¦ç†ã®è¨˜è¿°ã«ã¨ã©ã‚ã€é‡ã„å‡¦ç†ã¯åˆ†ã‘ã¦æ›¸ãã“ã¨ã‚’æ„è­˜ã—ã¾ã—ã‚‡ã†ã€‚\nã¾ãŸã€ã“ã“ã§ã¯æ—¢å­˜ã®ç‰©ä½“æ¤œå‡ºãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã—ãŸãŒã€PyTorchãªã©ã§ä½œæˆã—ãŸè‡ªä½œã®ãƒ¢ãƒ‡ãƒ«ã‚‚åŒæ§˜ã®æ çµ„ã¿ã§åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nç¶šã„ã¦ã€RGBç”»åƒã«æ•´åˆ—ã•ã‚ŒãŸãƒ‡ãƒ—ã‚¹ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’çµ±åˆã—ã¦ç‰©ä½“ã‚’æ¤œå‡ºã—ã€ç‰©ä½“ã¾ã§ã®è·é›¢ã‚’æ¸¬å®šã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\nRGBç”»åƒ/camera/color/image_rawã¨æ•´åˆ—ã•ã‚ŒãŸãƒ‡ãƒ—ã‚¹ç”»åƒ/camera/aligned_depth_to_color/image_rawã¯ãã‚Œãã‚Œç‹¬ç«‹ã—ãŸãƒˆãƒ”ãƒƒã‚¯ã§ã‚ã‚‹ãŸã‚ã€åŒæœŸã‚’å–ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\nç”»åƒã®åŒæœŸã«ã¯message_filters(http://wiki.ros.org/message_filters)ãŒã‚ˆãä½¿ã‚ã‚Œã¾ã™ã€‚\nmessage_filters.ApproximateTimeSynchronizerã‚’ä½¿ã„ä»¥ä¸‹ã®ã‚ˆã†ã«Subscriberã‚’ä½œæˆã—ã¾ã™ã€‚\nrgb_sub = message_filters.Subscriber('/camera/color/image_raw', Image) depth_sub = message_filters.Subscriber('/camera/aligned_depth_to_color/image_raw', Image) message_filters.ApproximateTimeSynchronizer([rgb_sub, depth_sub], 10, 1.0).registerCallback(callback_rgbd) def callback_rgbd(data1, data2): bridge = CvBridge() cv_array = bridge.imgmsg_to_cv2(data1, 'bgr8') cv_array = cv2.cvtColor(cv_array, cv2.COLOR_BGR2RGB) self.rgb_image = cv_array cv_array = bridge.imgmsg_to_cv2(data2, 'passthrough') self.depth_image = cv_array  ã“ã®ä¾‹ã§ã¯ã€1.0ç§’ã®è¨±å®¹ã§'/camera/color/image_raw\u0026rsquo;ã¨'/camera/aligned_depth_to_color/image_raw\u0026rsquo;ã®ãƒˆãƒ”ãƒƒã‚¯ã®åŒæœŸã‚’å–ã‚‹ã“ã¨ãŒã§ãã‚Œã°ã€ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°callback_rgbdãŒå‘¼ã°ã‚Œã‚»ãƒ³ã‚µãƒ‡ãƒ¼ã‚¿ãŒå—ã‘ã¨ã‚‰ã‚Œã¾ã™ã€‚\nãã‚Œã§ã¯ã€ç‰©ä½“ã‚’æ¤œå‡ºã—ã€ç‰©ä½“ã¾ã§ã®è·é›¢ã‚’æ¸¬å®šã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n#!/usr/bin/env python3 import rospy import message_filters from sensor_msgs.msg import Image from cv_bridge import CvBridge from pytorchyolo import detect, models import matplotlib.pyplot as plt import matplotlib.patches as patches import cv2 import copy class DetectionDistance: def __init__(self): rospy.init_node('detection_distance', anonymous=True) # Publisher self.detection_result_pub = rospy.Publisher('/detection_result', Image, queue_size=10) # Subscriber rgb_sub = message_filters.Subscriber('/camera/color/image_raw', Image) depth_sub = message_filters.Subscriber('/camera/aligned_depth_to_color/image_raw', Image) message_filters.ApproximateTimeSynchronizer([rgb_sub, depth_sub], 10, 1.0).registerCallback(self.callback_rgbd) self.bridge = CvBridge() self.rgb_image, self.depth_image = None, None def callback_rgbd(self, data1, data2): cv_array = self.bridge.imgmsg_to_cv2(data1, 'bgr8') cv_array = cv2.cvtColor(cv_array, cv2.COLOR_BGR2RGB) self.rgb_image = cv_array cv_array = self.bridge.imgmsg_to_cv2(data2, 'passthrough') self.depth_image = cv_array def process(self): path = \u0026quot;/root/roomba_hack/catkin_ws/src/three-dimensions_tutorial/yolov3/\u0026quot; # load category with open(path+\u0026quot;data/coco.names\u0026quot;) as f: category = f.read().splitlines() # prepare model model = models.load_model(path+\u0026quot;config/yolov3.cfg\u0026quot;, path+\u0026quot;weights/yolov3.weights\u0026quot;) while not rospy.is_shutdown(): if self.rgb_image is None: continue # inference tmp_image = copy.copy(self.rgb_image) boxes = detect.detect_image(model, tmp_image) # [[x1, y1, x2, y2, confidence, class]] # plot bouding box for box in boxes: x1, y1, x2, y2 = map(int, box[:4]) cls_pred = int(box[5]) tmp_image = cv2.rectangle(tmp_image, (x1, y1), (x2, y2), (0, 255, 0), 3) tmp_image = cv2.putText(tmp_image, category[cls_pred], (x1, y1), cv2.FONT_HERSHEY_SIMPLEX, 1.0, (0, 255, 0), 2) cx, cy = (x1+x2)//2, (y1+y2)//2 print(category[cls_pred], self.depth_image[cy][cx]/1000, \u0026quot;m\u0026quot;) # publish image tmp_image = cv2.cvtColor(tmp_image, cv2.COLOR_RGB2BGR) detection_result = self.bridge.cv2_to_imgmsg(tmp_image, \u0026quot;bgr8\u0026quot;) self.detection_result_pub.publish(detection_result) if __name__ == '__main__': dd = DetectionDistance() try: dd.process() except rospy.ROSInitException:  åŸºæœ¬çš„ã«ã¯ç‰©ä½“æ¤œå‡ºã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨åŒã˜ã§ã™ãŒã€\ncx, cy = (x1+x2)//2, (y1+y2)//2 print(category[cls_pred], self.depth_image[cy][cx]/1000, \u0026quot;m\u0026quot;)  ã§bounding boxã®ä¸­å¿ƒåº§æ¨™ã‚’å¤‰æ›ã—ã€å¯¾å¿œã™ã‚‹è·é›¢ã‚’ãƒ¡ãƒ¼ãƒˆãƒ«å˜ä½ã§è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚\næ•´åˆ—ã•ã‚ŒãŸãƒ‡ãƒ—ã‚¹ç”»åƒã‚’ç”¨ã„ã¦ã„ã‚‹ãŸã‚ã€RGBç”»åƒã«åŸºã¥ãç®—å‡ºã—ãŸåº§æ¨™ã‚’ãã®ã¾ã¾æŒ‡å®šã§ãã¾ã™ã€‚\nç‚¹ç¾¤ã®ä½œæˆ ä¸Šã®ä¾‹ã§ã¯RGBç”»åƒã¨ãƒ‡ãƒ—ã‚¹ç”»åƒã‚’ç”¨ã„ãŸä¸‰æ¬¡å…ƒç”»åƒå‡¦ç†ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã—ãŸã€‚\nã—ã‹ã—ã€ãƒ­ãƒœãƒƒãƒˆã®è‡ªç«‹ç§»å‹•ãªã©ã‚ˆã‚Šè¤‡é›‘ãªå‹•ä½œã‚’ã•ã›ã‚‹ã“ã¨ã‚’è€ƒãˆãŸã¨ãã€æ·±åº¦ãƒ‡ãƒ¼ã‚¿ã‚’ä¸‰æ¬¡å…ƒç©ºé–“ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã§ããŸã»ã†ãŒä½ç½®é–¢ä¿‚ã‚’çµ±ä¸€çš„ã«æ‰±ã†ã“ã¨ãŒã§ãä¾¿åˆ©ãªã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚\nãã‚Œã§ãƒ‡ãƒ—ã‚¹ç”»åƒã‹ã‚‰ç‚¹ç¾¤ã¨å‘¼ã°ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚’è€ƒãˆã¾ã™ã€‚\nç‚¹ç¾¤ã¨ã¯ä¸‰æ¬¡å…ƒåº§æ¨™å€¤(X,Y,Z)ã§æ§‹æˆã•ã‚ŒãŸç‚¹ã®é›†ã¾ã‚Šã®ã“ã¨ã§ã™ã€‚å„ç‚¹ã®æƒ…å ±ã¨ã—ã¦ã€ä¸‰æ¬¡å…ƒåº§æ¨™å€¤ã«åŠ ãˆè‰²ã®æƒ…å ±(R,G,B)ãŒåŠ ã‚ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚ ãƒ‡ãƒ—ã‚¹ç”»åƒã¯ã‚«ãƒ¡ãƒ©ã®å†…éƒ¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç”¨ã„ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ç‚¹ç¾¤ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚(https://medium.com/yodayoda/from-depth-map-to-point-cloud-7473721d3f)\nä»Šå›ã¯depth_image_procã¨å‘¼ã°ã‚Œã‚‹ã€ãƒ‡ãƒ—ã‚¹ç”»åƒã‚’ç‚¹ç¾¤ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã™ã‚‹ROSã®å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸(http://wiki.ros.org/depth_image_proc) ã‚’ä½¿ç”¨ã—ã¦ç‚¹ç¾¤ã®å¤‰æ›ã‚’è¡Œã„ã¾ã™ã€‚\nå¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯~/catkin_ws/srcç­‰ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«é…ç½®ã—ã€ãƒ“ãƒ«ãƒ‰ã—ãƒ‘ã‚¹ã‚’é€šã™ã“ã¨ã§ç°¡å˜ã«ä½¿ç”¨ã§ãã¾ã™ã€‚\ndepth_image_procã®wikiã‚’å‚è€ƒã«ä»¥ä¸‹ã®ã‚ˆã†ãªlaunchãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸã€‚\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot;?\u0026gt; \u0026lt;launch\u0026gt; \u0026lt;node pkg=\u0026quot;nodelet\u0026quot; type=\u0026quot;nodelet\u0026quot; name=\u0026quot;nodelet_manager\u0026quot; args=\u0026quot;manager\u0026quot; /\u0026gt; \u0026lt;node pkg=\u0026quot;nodelet\u0026quot; type=\u0026quot;nodelet\u0026quot; name=\u0026quot;nodelet1\u0026quot; args=\u0026quot;load depth_image_proc/point_cloud_xyz nodelet_manager\u0026quot;\u0026gt; \u0026lt;remap from=\u0026quot;camera_info\u0026quot; to=\u0026quot;/camera/color/camera_info\u0026quot;/\u0026gt; \u0026lt;remap from=\u0026quot;image_rect\u0026quot; to=\u0026quot;/camera/aligned_depth_to_color/image_raw\u0026quot;/\u0026gt; \u0026lt;remap from=\u0026quot;points\u0026quot; to=\u0026quot;/camera/depth/points\u0026quot;/\u0026gt; \u0026lt;/node\u0026gt; \u0026lt;/launch\u0026gt;  ã“ã®launchãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹ã¨/camera/color/camera_infoã¨/camera/aligned_depth_to_color/image_rawã‚’Subscribeã—ã€/camera/depth/pointsã‚’Publishã—ã¾ã™ã€‚\n/camera/color/camera_infoã¯sensor_msgs/CameraInfoå‹ã®ãƒˆãƒ”ãƒƒã‚¯ã§ã‚ã‚Šã€ã‚«ãƒ¡ãƒ©ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚„ãƒ•ãƒ¬ãƒ¼ãƒ idã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãªã©ã‚’ä¿æŒã—ã¦ãŠã‚Šã€ç‚¹ç¾¤ã®å¤‰æ›ã«åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚ /camera/aligned_depth_to_color/image_rawã¯RGBç”»åƒã«æ•´åˆ—ã•ã‚ŒãŸãƒ‡ãƒ—ã‚¹ç”»åƒã§ã‚ã‚‹ãŸã‚ã€/camera/depth/camera_infoã§ã¯ãªã/camera/color/camera_infoã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚\nroslaunch three-dimensions_tutorial depth2pc.launchã‚’è¡Œã„/camera/depth/pointsãƒˆãƒ”ãƒƒã‚¯ã‚’rvizã§å¯è¦–åŒ–ã‚’ã™ã‚‹ã¨ä¸‰æ¬¡å…ƒç©ºé–“ã«ç‚¹ç¾¤ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã®ãŒç¢ºèªã§ãã¾ã™ã€‚\næ¼”ç¿’ (é–‹ç™ºPC, jetson)èµ·å‹•æº–å‚™ (jetson)$ ./RUN-DOCKER-CONTAINER.sh (jetson)(docker)# roslaunch roomba_bringup bringup.launch (é–‹ç™ºPC)$ ./RUN-DOCKER-CONTAINER.sh 192.168.10.7x   (é–‹ç™ºPC)RealSenseã®ãƒˆãƒ”ãƒƒã‚¯ã®å¯è¦–åŒ– (é–‹ç™ºPC)(docker) rviz  /camera/color/image_rawã¨/camera/depth/image_rawã¨/camera/aligned_depth_to_color/image_rawã‚’å¯è¦–åŒ–ã—ã¦é•ã„ã‚’ç¢ºèªã—ã¦ã¿ã‚ˆã†ã€‚\n (é–‹ç™ºPC)ç‰©ä½“æ¤œå‡ºã‚’è¡Œã† (é–‹ç™ºPC)(docker) cd catkin_ws; catkin_make; source devel/setup.bash (é–‹ç™ºPC)(docker) roscd three-dimensions_tutorial; cd yolov3/weights; ./download_weights.sh (é–‹ç™ºPC)(docker) rosrun three-dimensions_tutorial object_detection.py rvizã§`/detection_result`ã‚’è¡¨ç¤ºã—çµæœã‚’ç¢ºèªã—ã¦ã¿ã‚ˆã†ã€‚ (é–‹ç™ºPC)(docker) rosrun three-dimensions_tutorial detection_distance.py   (é–‹ç™ºPC)å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ (é–‹ç™ºPC)(docker) cd ~/external_catkin_ws/src (é–‹ç™ºPC)(docker) git clone https://github.com/ros-perception/image_pipeline (é–‹ç™ºPC)(docker) cd ../; catkin build; source devel/setup.bash (é–‹ç™ºPC)(docker) cd ~/roomba_hack/catkin_ws; source devel/setup.bash (é–‹ç™ºPC)(docker) roslaunch three-dimensions_tutorial depth2pc.launch (é–‹ç™ºPC)(docker) roslaunch navigation_tutorial navigation.launch  rvizã§/camera/depth/pointsãƒˆãƒ”ãƒƒã‚¯ã‚’è¿½åŠ ã—ã¦ç¢ºèªã—ã¦ã¿ã‚ˆã†ã€‚\n ä½™è£•ãŒã‚ã‚‹äººå‘ã‘ ç‰©ä½“ã‚’æ¤œå‡ºã—ã€ç‰¹å®šã®ç‰©ä½“ã®æ‰‹å‰ã¾ã§ç§»å‹•ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\nãƒ’ãƒ³ãƒˆ\n ç‰©ä½“æ¤œå‡ºçµæœã«åŸºã¥ã„ã¦ç‰©ä½“éƒ¨åˆ†ä»¥å¤–ã‚’ãƒã‚¹ã‚¯ã—ãŸãƒ‡ãƒ—ã‚¹ç”»åƒã‚’publishã™ã‚‹ depth2pc.launchã§ãã‚Œã‚’subscribeã—ã€point(cloud)ã«å¤‰æ›ã™ã‚‹ å¤‰æ›ã•ã‚ŒãŸpointã‹ã‚‰mapåº§æ¨™ç³»ã§ã®ä½ç½®ã‚’å–å¾—ã™ã‚‹ navigation_tutorial/scripts/set_goal.py (mapåº§æ¨™ç³»ã§æŒ‡å®šã—ãŸä½ç½®ãƒ»å§¿å‹¢ã¾ã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ)ãªã©ã‚’å‚è€ƒã«ã€ãã®ä½ç½®ã¸ã¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹  PyTorchã‚’ä½¿ç”¨ã—ãŸè‡ªä½œã®åˆ†é¡å™¨ã‚„ãƒãƒƒãƒˆä¸Šã®åˆ†é¡å™¨ã‚’ã‚·ã‚¹ãƒ†ãƒ ã«çµ„ã¿è¾¼ã‚“ã§ã¿ã¾ã—ã‚‡ã†ã€‚\nLidarã«æ˜ ã‚‰ãªã„ç‰©ä½“ã‚‚ç”»åƒãƒ™ãƒ¼ã‚¹ã§æ¤œå‡ºã—ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—ã«è¿½åŠ ã™ã‚‹ã“ã¨ã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ™‚ã«ã¶ã¤ã‹ã‚‰ãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚\n","date":1642809600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1642809600,"objectID":"6efadb7100ad083ad0bc43c5fd3c3b1a","permalink":"https://matsuolab.github.io/roomba_hack/course/chap5/three-dimensions/","publishdate":"2022-01-22T00:00:00Z","relpermalink":"/roomba_hack/course/chap5/three-dimensions/","section":"course","summary":"","tags":null,"title":"ä¸‰æ¬¡å…ƒç”»åƒå‡¦ç†","type":"book"},{"authors":null,"categories":null,"content":"Learn å‰å›ã®æ¼”ç¿’ã§ã¯ã€ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã‚’ç”¨ã„ã¦ãƒ­ãƒœãƒƒãƒˆã‚’åˆ¶å¾¡ã—ã¾ã—ãŸã€‚\n1mé€²ã‚€ã‚„ã€90åº¦å³å›è»¢ãªã©ã‚ã‚‹ç¨‹åº¦æ­£ç¢ºã«å‹•ã„ãŸã‹ã¨æ€ã„ã¾ã™ã€‚ ã—ã‹ã—ã€ã“ã‚ŒãŒæ•°10må‰é€²ã‚„ã€æ•°åˆ†é–“å‹•ãç¶šã‘ãŸæ™‚ã«ãƒ­ãƒœãƒƒãƒˆè‡ªèº«ã¯è‡ªåˆ†ãŒã‚¹ã‚¿ãƒ¼ãƒˆã®æ™‚ã‹ã‚‰ã©ã®ãã‚‰ã„å‹•ã„ãŸã‹ã‚ã‹ã‚‹ã§ã—ã‚‡ã†ã‹ã€‚\nãƒ«ãƒ³ãƒãŒç”¨ã„ã¦ã„ã‚‹ãƒ›ã‚¤ãƒ¼ãƒ«ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã¯ã€ãƒ›ã‚¤ãƒ¼ãƒ«ã®å›è»¢é‡ã‚’ç©ç®—ã™ã‚‹ã“ã¨ã§ç®—å‡ºã—ã¦ã„ã¾ã™ã€‚ãƒ›ã‚¤ãƒ¼ãƒ«ãŒæ»‘ã£ãŸå ´åˆã ã‘ã§ãªãã€ã‚»ãƒ³ã‚µã®åƒ…ã‹ã®èª¤å·®ã®ç©ã¿é‡ã­ã§å¾ã€…ã«ãšã‚Œã¦ã„ã£ã¦ã—ã¾ã„ã¾ã™ã€‚\nãã“ã§ä»Šå›ã¯ã€ã‚ªãƒ‰ãƒ¡ãƒˆãƒªæƒ…å ±ã ã‘ã§ãªãã€åœ°å›³ã¨LiDARã‚¹ã‚­ãƒ£ãƒ³æƒ…å ±ã‚‚åŒæ™‚ã«ä½¿ã„ãªãŒã‚‰ã€ãƒ­ãƒœãƒƒãƒˆè‡ªèº«ã®å°¤ã‚‚ã‚‰ã—ã„ä½ç½®ã‚’æ¨å®šã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚\nROSã«ãŠã‘ã‚‹åº§æ¨™ç³»ã®æ‰±ã„æ–¹(TF) ã¾ãšã¯ã€ROSã«ãŠã‘ã‚‹åº§æ¨™ç³»ã®æ‰±ã„æ–¹ã«ã¤ã„ã¦ã¿ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã¯ã€ã„ã‚ã„ã‚ãªåº§æ¨™ç³»ã‚’ä½¿ã£ã¦ä½ç½®å§¿å‹¢ã‚’è¡¨ç¾ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚\n ãƒ­ãƒœãƒƒãƒˆã®åº§æ¨™ç³» ã‚»ãƒ³ã‚µã®åº§æ¨™ç³» ãƒ­ãƒœãƒƒãƒˆã®é–¢ç¯€ã®åº§æ¨™ç³» éƒ¨å±‹ã®åº§æ¨™ç³» ç‰©ä½“ã®åº§æ¨™ç³» ãƒ»ãƒ»ãƒ»ãƒ»  ã“ã®ã‚ˆã†ãªåº§æ¨™ç³»åŒå£«ã‚’ç¹‹ã’ã¦ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ä¸Šã§ã®åº§æ¨™ç³»ã®ç®¡ç†ã‚’ã—ã¦ãã‚Œã‚‹ROSã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦tfãŒã‚ã‚Šã¾ã™ã€‚ tfã¯ã€å„åº§æ¨™ç³»ã‚’ãƒ„ãƒªãƒ¼ä¸Šã§ç¹‹ã’ã¾ã™ã€‚å¾“ã£ã¦ã€è¦ªã®åº§æ¨™ç³»ãŒè¤‡æ•°ã‚ã‚‹ã“ã¨ã¯è¨±ã•ã‚Œã¾ã›ã‚“ã€‚\nä»Šå›è‡ªå·±ä½ç½®æ¨å®šã™ã‚‹ã«ã‚ãŸã‚Šç”¨ã„ã‚‹åº§æ¨™ç³»ã®é–¢ä¿‚ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\nrosrun rqt_tf_tree rqt_tf_treeã¨ã—ã¦ã¿ã‚‹ã¨ã€tfã®ãƒ„ãƒªãƒ¼å½¢çŠ¶ã‚’å¯è¦–åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n  tfãƒ„ãƒªãƒ¼ã‚’rqtã§å¯è¦–åŒ–  ã“ã“ã§ã€odomåº§æ¨™ç³»ã¯ã€ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã®ç®—å‡ºã‚’å§‹ã‚ãŸä½ç½®(èµ·å‹•ã—ãŸä½ç½®)ã‚’åŸç‚¹ã¨ã—ãŸåº§æ¨™ç³»ã§ã€ãƒ›ã‚¤ãƒ¼ãƒ«ã‚ªãƒ‰ãƒ¡ãƒˆãƒªã®å€¤ã‹ã‚‰ã€ãƒ­ãƒœãƒƒãƒˆã®åŸºæº–ã¨ãªã‚‹base_footprintåº§æ¨™ç³»ã‚’ç¹‹ã’ã¦ã„ã¾ã™ã€‚ base_footprintåº§æ¨™ç³»ã®ä¸‹ã«ã¯ã€ãƒ«ãƒ³ãƒãƒ­ãƒœãƒƒãƒˆã®æ§‹æˆè¦ç´ ã§ã‚ã‚‹ã€ã‚»ãƒ³ã‚µé¡ã‚„ãƒ›ã‚¤ãƒ¼ãƒ«ãªã©ã®åº§æ¨™ç³»ãŒå­ã¨ã—ã¦ç¹‹ãŒã£ã¦ã„ã¾ã™ã€‚\nä¸€ç•ªè¦ªã«ã„ã‚‹mapåº§æ¨™ç³»ã¯ã€åœ°å›³ã®åŸç‚¹ã‚’åŸºæº–ã¨ã—ãŸåº§æ¨™ç³»ã§ã™ãŒã€ã“ã®åº§æ¨™ç³»ã«ãŠã‘ã‚‹ãƒ­ãƒœãƒƒãƒˆã®åº§æ¨™ç³»(base_footprint)ã‚’ç¹‹ã’ã‚‹ã“ã¨ãŒã€è‡ªå·±ä½ç½®æ¨å®šã®ç›®çš„ã«ãªã‚Šã¾ã™ã€‚ ã—ã‹ã—ã€base_footprintã®è¦ªã«ã¯æ—¢ã«odomãŒã„ã‚‹ãŸã‚ã€mapåº§æ¨™ç³»ã¨odomåº§æ¨™ç³»ã‚’ç¹‹ã’ã‚‹ã“ã¨ã§ã€å…¨ä½“ã‚’ã²ã¨ã¤ã®ãƒ„ãƒªãƒ¼ã¨ã—ã¦ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nè‡ªå·±ä½ç½®æ¨å®š è‡ªå·±ä½ç½®æ¨å®šã¯ã€åœ°å›³ãŒäº‹å‰ã«ä¸ãˆã‚‰ã‚Œã¦ã„ã¦ã€ãã“ã®ã©ã“ã«ãƒ­ãƒœãƒƒãƒˆãŒã„ã‚‹ã‹ã‚’é€æ¬¡çš„ã«å¤–ç•Œã‚»ãƒ³ã‚µ(LiDAR)ã¨å†…ç•Œã‚»ãƒ³ã‚µ(Odometry)ã‚’ç”¨ã„ã¦æ¨å®šã—ã¦ã„ãæ‰‹æ³•ã«ãªã‚Šã¾ã™ã€‚\nãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ãƒ•ã‚£ãƒ«ã‚¿ã‚„ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãƒ•ã‚£ãƒ«ã‚¿ãªã©ã„ãã¤ã‹ã®æ‰‹æ³•ãŒå­˜åœ¨ã—ã€ ãã‚Œãã‚Œãƒ¡ãƒªãƒƒãƒˆãƒ‡ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ãŒã€ã“ã“ã§ã¯ä»£è¡¨çš„ãªãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãƒ•ã‚£ãƒ«ã‚¿ã‚’ç”¨ã„ãŸæ‰‹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚\nè‡ªå·±ä½ç½®æ¨å®šã§ã¯ã€è¦³æ¸¬ãƒ¢ãƒ‡ãƒ«ã¨çŠ¶æ…‹é·ç§»ãƒ¢ãƒ‡ãƒ«ã‚’äº¤äº’ã«ç¹°ã‚Šè¿”ã™ã“ã¨ã«ã‚ˆã£ã¦ã€ãƒ­ãƒœãƒƒãƒˆè‡ªèº«ãŒã©ã“ã«ã„ã‚‹ã‹ã®ç¢ºç‡åˆ†å¸ƒã‚’æ›´æ–°ã—ã¦ã„ãã“ã¨ã§è‡ªå·±ä½ç½®æ¨å®šã‚’ã—ã¦ã„ãã¾ã™ã€‚\nãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãƒ•ã‚£ãƒ«ã‚¿ã§ã¯ã€ã“ã®ç¢ºç‡åˆ†å¸ƒã‚’å¤§é‡ã®ç²’å­ã‚’ç”¨ã„ã¦è¡¨ç¾ã™ã‚‹æ‰‹æ³•ã«ãªã£ã¦ã„ã¦ã€å„ç²’å­ãŒä½ç½®ã¨ãã“ã«ãƒ­ãƒœãƒƒãƒˆãŒã„ã‚‹ã§ã‚ã‚ã†ç¢ºç‡(å°¤åº¦)ã‚’æŒã£ã¦ã„ã¾ã™ã€‚\nãƒ­ãƒœãƒƒãƒˆãŒå‹•ãã”ã¨(ã‚ªãƒ‰ãƒ¡ãƒˆãƒªãŒæ›´æ–°ã•ã‚Œã‚‹ã”ã¨)ã«ã€çŠ¶æ…‹é·ç§»ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ã¦å„ç²’å­ã®ä½ç½®æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã™ã€‚ ã“ã®æ™‚ã€ä¸€èˆ¬çš„ã«åˆ†å¸ƒã¯åºƒãŒã‚Šã¾ã™ã€‚(äººé–“ãŒç›®ã‚’é–‰ã˜ã¦æ­©ã„ãŸã‚‰ã©ã“ã«ã„ã‚‹ã‹åˆ†ã‹ã‚Šã¥ã‚‰ããªã‚‹ã®ã¨åŒã˜)\nå¤–ç•Œã®æƒ…å ±ãŒã‚ã‹ã‚‹ã”ã¨(ã‚¹ã‚­ãƒ£ãƒ³æƒ…å ±ãŒæ›´æ–°ã•ã‚Œã‚‹ã”ã¨)ã«ã€è¦³æ¸¬ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ã¦å„ç²’å­ã®å°¤åº¦ã‚’æ›´æ–°ã—ã¾ã™ã€‚ å°¤åº¦ã¯ã€å„ç²’å­ã®ä½ç½®ã‹ã‚‰è¦³æ¸¬ã§ãã‚‹ã§ã‚ã‚ã†ã‚¹ã‚­ãƒ£ãƒ³æƒ…å ±ã¨ã€å®Ÿéš›ã®ãƒ­ãƒœãƒƒãƒˆã§å–å¾—ã—ãŸã‚¹ã‚­ãƒ£ãƒ³æƒ…å ±ã¨ã®å·®ã‹ã‚‰ç®—å‡ºã—ã¾ã™ã€‚\n  Monte Carlo Localization(Particle Filter) Dieter Fox et al. 1999, using sonar. http://www.doc.ic.ac.uk/~ajd/Robotics/RoboticsResources/montecarlolocalization.gif  launchãƒ•ã‚¡ã‚¤ãƒ«ã¨rosparam è‡ªå·±ä½ç½®æ¨å®šã§ã¯ã€åˆæœŸä½ç½®ãŒã©ã“ã‹ã€ãƒ¬ãƒ¼ã‚¶ãƒ¼ã®ã‚¹ãƒšãƒƒã‚¯ã‚„ã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®æ•°ãªã©æ•°åå€‹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä¿æŒã—ã¾ã™ã€‚\nã“ã‚Œã‚‰ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒ å†…éƒ¨ã§è¨˜è¿°ã™ã‚‹ã®ã§ã¯ãªãã€launchãƒ•ã‚¡ã‚¤ãƒ«å†…ã§æŒ‡å®šã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ rosã§ã¯ã€rosparamã¨ã„ã†å½¢ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç®¡ç†ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚\nä»¥ä¸‹ã«ã€ä»Šå›ç”¨ã„ã‚‹amcl.launch ã‚’ç¤ºã—ã¾ã™ã€‚ launchãƒ•ã‚¡ã‚¤ãƒ«ã¯xmlå½¢å¼ã§è¨˜è¿°ã•ã‚Œã€paramã‚’æŒ‡å®šã™ã‚‹ã“ã¨ä»¥å¤–ã«ã‚‚ã€ launchãƒ•ã‚¡ã‚¤ãƒ«å®Ÿè¡Œæ™‚ã«å¼•æ•°ã§æŒ‡å®šå¯èƒ½ãªargã‚„ã€ãƒˆãƒ”ãƒƒã‚¯åãªã©ã®ãƒªãƒãƒƒãƒ—ã‚’ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚\nlaunchã®è©³ã—ã„æ›¸ãæ–¹ã¯ã€rosã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot;?\u0026gt; \u0026lt;launch\u0026gt; \u0026lt;arg name=\u0026quot;use_map_topic\u0026quot; default=\u0026quot;true\u0026quot;/\u0026gt; \u0026lt;arg name=\u0026quot;odom_topic\u0026quot; default=\u0026quot;/odom\u0026quot; /\u0026gt; \u0026lt;arg name=\u0026quot;scan_topic\u0026quot; default=\u0026quot;/scan\u0026quot; /\u0026gt; \u0026lt;node pkg=\u0026quot;amcl\u0026quot; type=\u0026quot;amcl\u0026quot; name=\u0026quot;amcl\u0026quot; output=\u0026quot;screen\u0026quot;\u0026gt; \u0026lt;remap from=\u0026quot;scan\u0026quot; to=\u0026quot;$(arg scan_topic)\u0026quot;/\u0026gt; \u0026lt;remap from=\u0026quot;odom\u0026quot; to=\u0026quot;$(arg odom_topic)\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;use_map_topic\u0026quot; value=\u0026quot;$(arg use_map_topic)\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;initial_pose_x\u0026quot; value=\u0026quot;0.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;initial_pose_y\u0026quot; value=\u0026quot;0.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;initial_pose_a\u0026quot; value=\u0026quot;0.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;initial_cov_xx\u0026quot; value=\u0026quot;0.1*0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;initial_cov_yy\u0026quot; value=\u0026quot;0.1*0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;initial_cov_aa\u0026quot; value=\u0026quot;0.3*3.14\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;gui_publish_rate\u0026quot; value=\u0026quot;10.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_max_beams\u0026quot; value=\u0026quot;2.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_min_range\u0026quot; value=\u0026quot;0.15\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_max_range\u0026quot; value=\u0026quot;12.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_z_hit\u0026quot; value=\u0026quot;0.8\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_z_short\u0026quot; value=\u0026quot;0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_z_max\u0026quot; value=\u0026quot;0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_z_rand\u0026quot; value=\u0026quot;0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_sigma_hit\u0026quot; value=\u0026quot;0.2\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_lambda_short\u0026quot; value=\u0026quot;0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_model_type\u0026quot; value=\u0026quot;likelihood_field\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;laser_likelihood_max_dist\u0026quot; value=\u0026quot;2.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;min_particles\u0026quot; value=\u0026quot;100\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;max_particles\u0026quot; value=\u0026quot;1000\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;kld_err\u0026quot; value=\u0026quot;0.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;kld_z\u0026quot; value=\u0026quot;0.0\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;update_min_d\u0026quot; value=\u0026quot;0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;update_min_a\u0026quot; value=\u0026quot;0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;resample_interval\u0026quot; value=\u0026quot;1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;transform_tolerance\u0026quot; value=\u0026quot;0.2\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;recovery_alpha_slow\u0026quot; value=\u0026quot;0.001\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;recovery_alpha_fast\u0026quot; value=\u0026quot;0.1\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;odom_frame_id\u0026quot; value=\u0026quot;odom\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;odom_model_type\u0026quot; value=\u0026quot;diff\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;odom_alpha1\u0026quot; value=\u0026quot;0.2\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;odom_alpha2\u0026quot; value=\u0026quot;0.2\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;odom_alpha3\u0026quot; value=\u0026quot;0.2\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;odom_alpha4\u0026quot; value=\u0026quot;0.2\u0026quot;/\u0026gt; \u0026lt;param name=\u0026quot;odom_alpha5\u0026quot; value=\u0026quot;0.2\u0026quot;/\u0026gt; \u0026lt;/node\u0026gt; \u0026lt;/launch\u0026gt;  æ¼”ç¿’ ã€jetsonãƒ»é–‹ç™ºãƒã‚·ãƒ³ã€‘ãã‚Œãã‚Œdockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹• jetsonã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•\n(é–‹ç™ºPC):~$ ssh roomba_dev1 (jetson):~$ cd ~/group_a/roomba_hack (jetson)::~/group_a/roomba_hack$ git pull (jetson):~/group_a/roomba_hack$ ./RUN-DOCKER-CONTAINER.sh (jetson)(docker):~/roomba_hack# roslaunch roomba_bringup bringup.launch  é–‹ç™ºPCã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•\n(é–‹ç™ºPC):~$ cd ~/group_a/roomba_hack (é–‹ç™ºPC):~/group_a/roomba_hack$ git pull (é–‹ç™ºPC):~/group_a/roomba_hack$ ./RUN-DOCKER-CONTAINER.sh 192.168.10.7x   gmappingã§åœ°å›³ä½œæˆ (é–‹ç™ºPC)(docker) roslaunch navigation_tutorial gmapping.launch  åœ°å›³ã®ä¿å­˜ã€‚map.pgmï¼ˆç”»åƒãƒ‡ãƒ¼ã‚¿ï¼‰ã¨map.yaml(åœ°å›³æƒ…å ±)ãŒä¿å­˜ã•ã‚Œã‚‹ã€‚\n(é–‹ç™ºPC)(docker) rosrun map_server map_saver  ~/roomba_hack/catkin_ws/src/navigation_tutorial/map ã®ä¸‹ã«ä¿å­˜ã™ã‚‹ã€‚\n amclã‚’launchã—ã¦ã€è‡ªå·±ä½ç½®æ¨å®šã™ã‚‹ localizationãƒãƒ¼ãƒ‰ã¨åœ°å›³ã‚µãƒ¼ãƒãƒ¼ã‚’åŒæ™‚ã«èµ·å‹•ã€‚\n(é–‹ç™ºPC)(docker) roslaunch navigation_tutorial localization.launch (é–‹ç™ºPC)(docker) roslaunch roomba_teleop teleop.launch (é–‹ç™ºPC)(docker) rviz -d /root/roomba_hack/catkin_ws/src/navigation_tutorial/configs/navigation.rviz   åˆæœŸä½ç½®ã®æŒ‡å®š(rvizã®2D Pose Estimate) ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã§ç§»å‹•ã•ã›ã¦ã¿ã¦è‡ªå·±ä½ç½®ã‚’ç¢ºèª rqt_tf_treeã‚’è¦‹ã¦ã¿ã‚‹   amclã®paramã‚’ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹ launchãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã‚’è¦‹ã¦ã¿ã¦ã€å€¤ã‚’å¤‰ãˆã¦ã¿ã‚‹ã€‚\nå„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ„å‘³ã¯amclã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã€‚\nä¾‹ãˆã°ã€ãƒ»ãƒ»ãƒ»\n initial_cov_** ã‚’å¤§ããã—ã¦ã¿ã¦ã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãŒã¡ã‚ƒã‚“ã¨åæŸã™ã‚‹ã‹ã¿ã¦ã¿ã‚‹ã€‚ particleã®æ•°(min_particlesã€max_particles)ã‚’å¤‰ãˆã¦ã¿ã¦æŒ™å‹•ã‚’ã¿ã¦ã¿ã‚‹ã€‚   launchãƒ•ã‚¡ã‚¤ãƒ«ã®æ‹¡å¼µ localization.launchãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¦teleop.launchã¨rvizãŒåŒæ™‚ã«èµ·å‹•ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã¿ã‚ˆã†ã€‚\n\u0026lt;!-- teleop.launchã‚’èµ·å‹•--\u0026gt; \u0026lt;include file=\u0026quot;$(find roomba_teleop)/launch/teleop.launch\u0026quot;\u0026gt; \u0026lt;/include\u0026gt; \u0026lt;!-- rvizã‚’èµ·å‹•--\u0026gt; \u0026lt;node pkg=\u0026quot;rviz\u0026quot; type=\u0026quot;rviz\u0026quot; name=\u0026quot;navigation_rviz\u0026quot; args=\u0026quot;-d $(find navigation_tutorial)/configs/navigation.rviz\u0026quot;/\u0026gt;  ","date":1642809600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1642809600,"objectID":"29d802971ebbc674f8dd6b80aeddda91","permalink":"https://matsuolab.github.io/roomba_hack/course/chap4/localization/","publishdate":"2022-01-22T00:00:00Z","relpermalink":"/roomba_hack/course/chap4/localization/","section":"course","summary":"","tags":null,"title":"è‡ªå·±ä½ç½®æ¨å®š","type":"book"},{"authors":null,"categories":null,"content":"ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºç’°å¢ƒã«ä½¿ã‚ã‚Œã¦ã„ã‚‹è¦ç´ ã®æ¦‚è¦ã‚’ç†è§£ã™ã‚‹\nã‚¹ãƒ©ã‚¤ãƒ‰ https://docs.google.com/presentation/d/1-q6zq3vV91GTj7mw9uqwT4B8LyHDpFHBNVi4lEyCa5A/edit?usp=sharing\nLearn Linuxã‚³ãƒãƒ³ãƒ‰    command ã€€èª¬æ˜ option     ls ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®è¡¨ç¤º -l: è©³ç´°ã‚’è¡¨ç¤º -a: å…¨ã¦è¡¨ç¤º   mkdir ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ    cd ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç§»å‹•    mv ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•    rm ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ -r:ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã‚’å†èµ·çš„ã«å‰Šé™¤ -f:å¼·åˆ¶å‰Šé™¤   cat           ssh ssh \u0026lt;username\u0026gt;@\u0026lt;hostname\u0026gt; -p \u0026lt;port\u0026gt; -i \u0026lt;identity_file\u0026gt;  ã‚¨ãƒ‡ã‚£ã‚¿  vim  ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼š vimtuter   emacs  git/GitHub  gitã¨ã¯  add push pull fetch clone merge reset    GitHubã¨ã¯   docker   Dockerã¨ã¯\n  DockerFileã®ãƒ“ãƒ«ãƒ‰\ndocker build -t \u0026lt;image_name\u0026gt;:\u0026lt;tag_name\u0026gt; -f \u0026lt;Dockerfile\u0026gt; \u0026lt;relative_dir\u0026gt;    Docker Image\n# Docker imageä¸€è¦§ docker images # Docker Imageã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ docker pull \u0026lt;image_name\u0026gt;:\u0026lt;tag_name\u0026gt; # å‰Šé™¤ docker rmi \u0026lt;image_id\u0026gt; # ä¸è¦ãªDocker imageã‚’æ¶ˆã™ docker image prune    Docker Container\n# Docker containerã®èµ·å‹• docker run \u0026lt;image_name\u0026gt; \u0026lt;command\u0026gt; # Docker containerä¸€è¦§ docker ps -a # Docker containerã«æ¥ç¶š docker exec -it \u0026lt;container_name\u0026gt; bash  â€»docker runã§ã‚ˆãä½¿ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³\n -it  æ¨™æº–å…¥å‡ºåŠ›æœ‰åŠ¹ã«ãªã‚‹   --name \u0026lt;container_name\u0026gt;  ã‚³ãƒ³ãƒ†ãƒŠã®åå‰ã®æŒ‡å®š   --rm  ã‚³ãƒ³ãƒ†ãƒŠã‚’æŠœã‘ãŸéš›ã«è‡ªå‹•çš„ã«ã‚³ãƒ³ãƒ†ãƒŠã‚’å‰Šé™¤ã™ã‚‹   --gpus all  ã‚³ãƒ³ãƒ†ãƒŠã«å…¨gpuã‚’æ¸¡ã™ gpuã®å€‹æ•°ã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯ all ã®ä»£ã‚ã‚Šã«æ•°å­—(0, 1,\u0026hellip;) gpuã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯ --gpus '\u0026quot;device=0,1\u0026quot;'   -v \u0026lt;host/path/to/dir:container/path/to/dir\u0026gt;  ã‚³ãƒ³ãƒ†ãƒŠå†…ã«ãƒ›ã‚¹ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ãƒã‚¦ãƒ³ãƒˆã™ã‚‹   -p \u0026lt;host_port\u0026gt;:\u0026lt;container_port\u0026gt;  ãƒ›ã‚¹ãƒˆã®ãƒãƒ¼ãƒˆã‚’ã‚³ãƒ³ãƒ†ãƒŠã®ãƒãƒ¼ãƒˆã«ãƒãƒƒãƒ—ã™ã‚‹ ã‚³ãƒ³ãƒ†ãƒŠå†…ã§webã‚µãƒ¼ãƒã‚’å‹•ã‹ã™å ´åˆãªã©ã«ä½¿ã†   --net=host  ã‚³ãƒ³ãƒ†ãƒŠã¨ãƒ›ã‚¹ãƒˆã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’å…±æœ‰ã™ã‚‹(IPã‚¢ãƒ‰ãƒ¬ã‚¹ãªã©ãŒåŒã˜ã«ãªã‚‹) ROSãƒãƒ¼ãƒ‰ã‚’ã‚³ãƒ³ãƒ†ãƒŠå†…ã§å‹•ã‹ã™å ´åˆãªã©ã¯ã“ã‚Œã‚’ä½¿ã†ã¨æ¥½   --privileged  ã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰ã®ãƒ‡ãƒã‚¤ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ ã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰WEBã‚«ãƒ¡ãƒ©ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã„ã¨ããªã©      æ¼”ç¿’ æ¼”ç¿’ã«ã¯å€‹äººPC, é–‹ç™ºPC, ãƒ«ãƒ³ãƒã«æ­è¼‰ã•ã‚Œã¦ã„ã‚‹jetsonã®3ç¨®é¡ã®ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚’ç”¨ã„ã¾ã™ã€‚\né–‹ç™ºPC : robot_devç³», hsr_devç³»\njetson : roomba_devç³»\nã€sshã€‘é–‹ç™ºç”¨PCã«sshã™ã‚‹ å€‹äººPCã‹ã‚‰é–‹ç™ºPCã«sshã™ã‚‹\n(å€‹äººPC):~$ vim ~/.ssh/config (å€‹äººPC):~$ ssh robot_dev2  sshã«æˆåŠŸã™ã‚‹ã¨\nrobot_dev2@robot-dev2:~$  ãªã©ã¨è¡¨è¨˜ãŒå¤‰ã‚ã‚Šã€é–‹ç™ºPCã«æ¥ç¶šã§ããŸã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚\n ã€Linuxã‚³ãƒãƒ³ãƒ‰ã€‘ã‚°ãƒ«ãƒ¼ãƒ—ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ç§»å‹•ã™ã‚‹ (é–‹ç™ºPC):~$ mkdir group_a (é–‹ç™ºPC):~$ cd group_a   ã€gitã€‘roomba_hackãƒªãƒã‚¸ãƒˆãƒªã‚’cloneã—ç§»å‹•ã™ã‚‹ (é–‹ç™ºPC):~/group_a$ git clone https://github.com/matsuolab/roomba_hack.git (é–‹ç™ºPC):~/group_a$ cd roomba_hack (é–‹ç™ºPC):~/group_a$ ls  https://github.com/matsuolab/roomba_hack ã‚’ãã®ã¾ã¾ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ããŸã“ã¨ãŒç¢ºèªã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚\n ã€gitã€‘ãƒ–ãƒ©ãƒ³ãƒã‚’ç¢ºèªã™ã‚‹ git branchã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n(é–‹ç™ºPC):~/group_a/roomba_hack$ git branch   ã€dockerã€‘roomba_hackã®é–‹ç™ºç’°å¢ƒã®docker imageã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ shellãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã—ã¦ãƒ“ãƒ«ãƒ‰ã‚’è¡Œã„ã¾ã™ã€‚\n(é–‹ç™ºPC):~/group_a/roomba_hack$ ./BUILD-DOCKER-IMAGE.sh  shellãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã‚’catã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n(é–‹ç™ºPC)2:~/group_a/roomba_hack$ cat BUILD-DOCKER-IMAGE.sh  ç´°ã‹ã„ã¨ã“ã‚ã¯æ°—ã«ã—ãªãã¦ã„ã„ã§ã™ãŒã€ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€å¾Œã®\ndocker build . -f docker/${DOCKERFILE_NAME} -t ${IMAGE_NAME}:${TAG_NAME} --build-arg BASE_IMAGE=${BASE_IMAGE}  ã§ãƒ“ãƒ«ãƒ‰ãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚\n ã€sshã€‘jetsonã«sshã™ã‚‹ é–‹ç™ºç”¨PCã‹ã‚‰ãƒ«ãƒ³ãƒã«è¼‰ã£ã¦ã„ã‚‹jetson nanoã¸sshã—ã¾ã™ã€‚\n(é–‹ç™ºPC):~/group_a/roomba_hack$ ssh roomba_dev2 roomba_dev2@roomba-dev-jetson2:~$  å…ˆé ­ã®è¡¨è¨˜ãŒroomba_dev2@roomba-dev-jetson2ã¨å¤‰ã‚ã‚Šã€jetsonã¸æ¥ç¶šã•ã‚ŒãŸã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚\njetsonã§ã‚‚åŒæ§˜ã«ã‚°ãƒ«ãƒ¼ãƒ—ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€ç§»å‹•ã—ã€roomba_hackãƒªãƒã‚¸ãƒˆãƒªã‚’cloneã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n ã€sshã€‘VNCã‚’ä½¿ã† å€‹äººPCã‹ã‚‰é–‹ç™ºPCã«sshã§æ¥ç¶š\n(å€‹äººPC):~$ ssh robot_dev2 -L 5900:localhost:5900  æ‰‹å…ƒã®VNC viewerã§localhost:5900ã‚’é–‹ã\n","date":1609459200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1609459200,"objectID":"2a1ada4f20c1997bdd8592ad8bf5f9b1","permalink":"https://matsuolab.github.io/roomba_hack/course/chap1/%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83/","publishdate":"2021-01-01T00:00:00Z","relpermalink":"/roomba_hack/course/chap1/%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83/","section":"course","summary":"ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºç’°å¢ƒã«ä½¿ã‚ã‚Œã¦ã„ã‚‹è¦ç´ ã®æ¦‚è¦ã‚’ç†è§£ã™ã‚‹\n","tags":null,"title":"é–‹ç™ºç’°å¢ƒ","type":"book"},{"authors":null,"categories":null,"content":"ROSã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã«ã¤ã„ã¦ç†è§£ã—ã‚ˆã†\nLearn ROSã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ ROSã§ã¯ã€ç‰¹å®šã®ç›®çš„ã®ãŸã‚ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ç¾¤ã‚’ã¾ã¨ã‚ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ç®¡ç†ã™ã‚‹ã€‚\nä¾‹ã¨ã—ã¦ã€navigation_tutorialãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã‚’ç¤ºã™ã€‚\nnavigation_tutorial â”œâ”€â”€ CMakeLists.txt â”œâ”€â”€ launch â”‚Â â”œâ”€â”€ amcl.launch â”‚Â â”œâ”€â”€ avoidance.launch â”‚Â â”œâ”€â”€ gmapping.launch â”‚Â â”œâ”€â”€ go_straight.launch â”‚Â â”œâ”€â”€ localization.launch â”‚Â â”œâ”€â”€ map_server.launch â”‚Â â”œâ”€â”€ move_base.launch â”‚Â â””â”€â”€ navigation.launch â”œâ”€â”€ package.xml â”œâ”€â”€ params â”‚Â â”œâ”€â”€ base_global_planner_params.yaml â”‚Â â”œâ”€â”€ base_local_planner_params.yaml â”‚Â â”œâ”€â”€ costmap_common_params.yaml â”‚Â â”œâ”€â”€ dwa_local_planner_params.yaml â”‚Â â”œâ”€â”€ global_costmap_params.yaml â”‚Â â”œâ”€â”€ local_costmap_params.yaml â”‚Â â””â”€â”€ move_base_params.yaml â”œâ”€â”€ scripts â”‚Â â”œâ”€â”€ avoidance.py â”‚Â â”œâ”€â”€ simple_control2.py â”‚Â â””â”€â”€ simple_control.py â””â”€â”€ src â”œâ”€â”€ avoidance.cpp â””â”€â”€ go_straight.cpp  ä¸€èˆ¬çš„ã«ã€scriptsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚„srcãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãã‚Œãã‚ŒPython, C++ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒé…ç½®ã•ã‚Œã‚‹ã€‚\nä½œæˆã—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯rosrunã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n(Python) rosrun navigation_tutorial simple_control2.py (C++) rosrun navigation_tutorial go_straight  launchãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å…¥ã£ã¦ã„ã‚‹launchãƒ•ã‚¡ã‚¤ãƒ«ã¯è¤‡æ•°ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’åŒæ™‚ã«å®Ÿè¡Œã§ãã‚‹ãŸã‚ã®ä»•çµ„ã¿ã§ã‚ã‚‹ã€‚\nlaunchãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã¦ã§ã‚‚åŒæ§˜ã«roslaunchã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\nroslaunch navigation_tutorial move_base.launch  å®Ÿè¡Œæ™‚ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å(ä»Šå›ã ã¨navigation_tutorial)ã‚’æŒ‡å®šã™ã‚‹ã®ã§ã€ç¾åœ¨ã©ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã„ã‚‹ã‹ã«é–¢ä¿‚ãªãå®Ÿè¡ŒãŒå¯èƒ½ã§ã‚ã‚‹ã€‚\nROSã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ ROSã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã¨å‘¼ã°ã‚Œã‚‹ä½œæ¥­ã‚¹ãƒšãƒ¼ã‚¹ã«é…ç½®ã•ã‚Œã‚‹ã€‚\nä¸€èˆ¬çš„ã«catkin_wsã¨ã„ã†åå‰ãŒä½¿ã‚ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã€‚\ncatkin_wsã®ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã‚’ç¤ºã™ã€‚\ncatkin_ws â”œâ”€â”€ build â”œâ”€â”€ devel â””â”€â”€ src â”œâ”€â”€ CMakeLists.txt â”œâ”€â”€ navigation_tutorial â”‚Â â”œâ”€â”€ CMakeLists.txt â”‚Â â”œâ”€â”€ launch â”‚Â â”œâ”€â”€ package.xml â”‚Â â”œâ”€â”€ params â”‚Â â”œâ”€â”€ scripts â”‚Â â””â”€â”€ src â””â”€â”€ roomba â”œâ”€â”€ roomba_bringup â”‚Â â”œâ”€â”€ CMakeLists.txt â”‚Â â”œâ”€â”€ config â”‚Â â”œâ”€â”€ launch â”‚Â â””â”€â”€ package.xml â”œâ”€â”€ roomba_description â”‚Â â”œâ”€â”€ CMakeLists.txt â”‚Â â”œâ”€â”€ config â”‚Â â”œâ”€â”€ launch â”‚Â â”œâ”€â”€ meshes â”‚Â â”œâ”€â”€ package.xml â”‚Â â””â”€â”€ urdf â”œâ”€â”€ roomba_gazebo â”‚Â â”œâ”€â”€ CMakeLists.txt â”‚Â â”œâ”€â”€ launch â”‚Â â””â”€â”€ package.xml â””â”€â”€ roomba_teleop â”œâ”€â”€ CMakeLists.txt â”œâ”€â”€ include â”œâ”€â”€ launch â”œâ”€â”€ package.xml â””â”€â”€ src  catkin_wsã®srcå†…ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆã‚’è¡Œã„ã€catkin_wsç›´ä¸‹ã§catkin_makeã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€Cãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ãƒ“ãƒ«ãƒ‰ãŒè¡Œã‚ã‚Œã€buildãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨develãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒä½œæˆã•ã‚Œã‚‹ã€‚\nä½œæˆã•ã‚ŒãŸdevelãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸­ã®setup.bashã‚’ã‚½ãƒ¼ã‚¹source devel/setup.bashã™ã‚‹ã“ã¨ã§ã€ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å†…ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ‘ã‚¹ã‚’é€šã™ã“ã¨ãŒã§ãã‚‹ã€‚ã€€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ‘ã‚¹ã‚’é€šã™ã“ã¨ã§ã€ROSã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«é–¢ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚„ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å®Ÿè¡Œ(rosrunã‚„roslaunch)ãŒè¡Œãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚\nROSã®ã‚³ãƒãƒ³ãƒ‰ ROSã®ã‚³ãƒãƒ³ãƒ‰ã®ã†ã¡ã€ã‚ˆãç”¨ã„ã‚‹ã‚‚ã®ã‚’ç´¹ä»‹ã™ã‚‹ã€‚\n Topicé–¢é€£  rostopic list topicã®ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ rostopic echo \u0026lt;topic name\u0026gt; æŒ‡å®šã•ã‚ŒãŸtopicã®ä¸­èº«ã‚’è¡¨ç¤ºã™ã‚‹ rostopic hz \u0026lt;topic name\u0026gt; topicã®é…ä¿¡å‘¨æ³¢æ•°ã‚’å–å¾—ã™ã‚‹ rostopic info \u0026lt;topic name\u0026gt; topicã®æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ rostopic pub \u0026lt;topic name\u0026gt; \u0026lt;topic\u0026gt; topicã‚’é…ä¿¡ã™ã‚‹ rostopic type \u0026lt;topic name\u0026gt; topicã®å‹ã‚’ç¢ºèªã™ã‚‹   Nodeé–¢é€£  rosnode list nodeã®ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ rosnode ping \u0026lt;node name\u0026gt; nodeã®æ¥ç¶šãƒ†ã‚¹ãƒˆã‚’è¡Œã† rosnode info \u0026lt;node name\u0026gt; nodeã®æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ rosnode kill \u0026lt;node name\u0026gt; nodeã‚’ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã™ã‚‹   Packageé–¢é€£  rospack list packageã®ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ roscd \u0026lt;package name\u0026gt; æŒ‡å®šã—ãŸpackageå†…ã«ç§»å‹•ã™ã‚‹  ROSã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æ›¸ãæ–¹ ãã‚Œã§ã¯å®Ÿéš›ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¾‹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n#!/usr/bin/env python3 import rospy from geometry_msgs.msg import Twist def time_control(pub, velocity, yawrate, time): vel = Twist() start_time = rospy.get_rostime().secs while(rospy.get_rostime().secs-start_time\u0026lt;time): vel.linear.x = velocity vel.angular.z = yawrate pub.publish(vel) rospy.sleep(0.1) def simple_controller(): rospy.init_node('simple_controller', anonymous=True) pub = rospy.Publisher('/cmd_vel', Twist, queue_size=10) time_control(pub, 0.0, 0.0, 0.5) time_control(pub, 0.3, 0.0, 2.0) time_control(pub, 0.0, 0.0, 0.5) time_control(pub, -0.3, 0.0, 2.0) time_control(pub, 0.0, 0.0, 0.5) time_control(pub, 0.0, 0.5, 2.0) time_control(pub, 0.0, 0.0, 0.5) time_control(pub, 0.0, -0.5, 2.0) if __name__=='__main__': try: simple_controller() except rospy.ROSInitException: pass  ã¾ãšsimple_controlleré–¢æ•°å†…ã‚’ã¿ã¦ã„ãã¾ã—ã‚‡ã†ã€‚\nä»¥ä¸‹ã®éƒ¨åˆ†ã§simple_controllerã¨ã„ã†åå‰ã§ãƒãƒ¼ãƒ‰ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚\nrospy.init_node('simple_controller', anonymous=True)  ä»¥ä¸‹ã®éƒ¨åˆ†ã§Publisher(ãƒˆãƒ”ãƒƒã‚¯ã®publish)ã‚’å®£è¨€ã—ã¦ã„ã¾ã™ã€‚\nä»Šå›ã®å ´åˆã¯ã€/cmd_velãƒˆãƒ”ãƒƒã‚¯ã‚’Twistå‹ã§é€ä¿¡ã™ã‚‹Publisherã‚’å®£è¨€ã—ã¦ã„ã¾ã™ã€‚\npub = rospy.Publisher('/cmd_vel', Twist, queue_size=10)  ç¶šã„ã¦ã€time_controlé–¢æ•°ã§ã™ã€‚\nã“ã®é–¢æ•°ã¯publisherã€é€Ÿåº¦ã€è§’é€Ÿåº¦ã€æ™‚é–“ã‚’å—ã‘å–ã‚Šã€é€Ÿåº¦æŒ‡ä»¤ã‚’publishã—ã¾ã™ã€‚\ndef time_control(pub, velocity, yawrate, time): vel = Twist() start_time = rospy.get_rostime().secs while(rospy.get_rostime().secs-start_time\u0026lt;time): vel.linear.x = velocity vel.angular.z = yawrate pub.publish(vel) rospy.sleep(0.1)  ã“ã“ã§Twistå‹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚\nvel = Twist()  whileæ–‡ã§å—ã‘å–ã£ãŸæ™‚é–“ãŒéãã‚‹ã¾ã§ã®é–“ã€å—ã‘å–ã£ãŸé€Ÿåº¦ã¨å„é€Ÿåº¦ã‚’velã«æ ¼ç´ã—ã€pub.publish(vel)ã§publishã‚’è¡Œãªã£ã¦ã„ã¾ã™ã€‚\nwhile(rospy.get_rostime().secs-start_time\u0026lt;time): vel.linear.x = velocity vel.angular.z = yawrate pub.publish(vel) rospy.sleep(0.1)  æ¼”ç¿’ ã€jetsonãƒ»é–‹ç™ºãƒã‚·ãƒ³ã€‘ãã‚Œãã‚Œdockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹• jetsonã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•\n(é–‹ç™ºPC):~$ ssh roomba_dev1 (jetson):~$ cd ~/group_a/roomba_hack (jetson):~/group_a/roomba_hack ./RUN-DOCKER-CONTAINER.sh (jetson)(docker):~/roomba_hack#  é–‹ç™ºPCã§dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•\n(é–‹ç™ºPC):~$ cd ~/group_a/roomba_hack (é–‹ç™ºPC):~/group_a/roomba_hack ./RUN-DOCKER-CONTAINER.sh 192.168.10.7x (é–‹ç™ºPC)(docker):~/roomba_hack#   ã€jetsonãƒ»é–‹ç™ºãƒã‚·ãƒ³ã€‘ãƒ“ãƒ«ãƒ‰ã‚’ã—ã¦ãƒ‘ã‚¹ã‚’é€šã™ catkin_makeå¾Œã«develã¨buildãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒä½œæˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚\n(é–‹ç™ºPC)(docker):~/roomba_hack# cd catkin_ws (é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# rm -rf devel build (é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# ls (é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# catkin_make (é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# ls (é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# source ./devel/setup.bash   ã€jetsonã€‘ROSãƒã‚¹ã‚¿ã€å„ç¨®ãƒãƒ¼ãƒ‰ã‚’èµ·å‹• (jetson)(docker):~/roomba_hack# roslaunch roomba_bringup bringup.launch   ROSãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¯è¦–åŒ– ã€é–‹ç™ºPCã€‘topicã®ç¢ºèª Topicé–¢é€£ã®ã‚³ãƒãƒ³ãƒ‰ã®ã¨ã“ã‚ã®rostopic listã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦topicä¸€è¦§ã‚’è¡¨ç¤ºã—ã¦ã¿ã¾ã—ã‚‡ã†\n(é–‹ç™ºPC)(docker):~/roomba_hack# rostopic list  ç‰¹å®šã®topicã®å‹ã‚’ç¢ºèª\n(é–‹ç™ºPC)(docker)# rostopic type /camera/color/image_raw (é–‹ç™ºPC)(docker)# rostopic type /scan  ãã®å‹ãŒå®Ÿéš›ã«ã©ã®ã‚ˆã†ãªæ§‹æˆã‚’ã—ã¦ã„ã‚‹ã®ã‹ã¯rosmsg info \u0026lt;topic type\u0026gt;ã§èª¿ã¹ã‚‰ã‚Œã¾ã™ã€‚\nå‚è€ƒ\nsensor_msgs/LaserScanå‹ http://docs.ros.org/en/melodic/api/sensor_msgs/html/msg/LaserScan.html\nsensor_msgs/Imageå‹ http://docs.ros.org/en/noetic/api/sensor_msgs/html/msg/Image.html\nç‰¹å®šã®topicã®ä¸­èº«ã‚’ç¢ºèª\n(é–‹ç™ºPC)(docker)# rostopic echo /camera/color/image_raw (é–‹ç™ºPC)(docker)# rostopic echo /scan  rvizã‚’ç”¨ã„ã¦å¯è¦–åŒ–\n(é–‹ç™ºPC)(docker)# rviz   ã€é–‹ç™ºPCã€‘topicã®publish(é…ä¿¡) topic/cmd_velã®æƒ…å ±ã‚’ç¢ºèª\n(é–‹ç™ºPC)(docker)# rostopic info /cmd_vel  topic/cmd_velã®å‹ã‚’ç¢ºèª\n(é–‹ç™ºPC)(docker)# rostopic type /cmd_vel  geometry_msgs/Twistå‹ http://docs.ros.org/en/noetic/api/geometry_msgs/html/msg/Twist.html\ntopic/cmd_velã‚’publish\n(é–‹ç™ºPC)(docker)# rostopic pub /cmd_vel geometry_msgs/Twist \u0026quot;linear: x: 1.0 y: 0.0 z: 0.0 angular: x: 0.0 y: 0.0 z: 0.0\u0026quot;  (é–‹ç™ºPC)(docker)# rosrun navigation_tutorial simple_control.py   Try it! æ™‚é–“ãŒä½™ã£ãŸäººå‘ã‘ try it! roomba_bringupãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®bringup.launchã®ä¸­èº«ã‚’èª­ã‚“ã§ã¿ã‚ˆã†\nhint roscdã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ç°¡å˜ã«ç§»å‹•ãŒã§ãã¾ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯catã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚\ntry it! é–‹ç™ºPCã§rosnodeé–¢é€£ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ã¿ã‚ˆã†\ntry it! é–‹ç™ºPCã§rosrun rqt_graph rqt_graphã‚’å®Ÿè¡Œã—ã¦nodeã¨topicã®é–¢é€£ã‚’å¯è¦–åŒ–ã—ã¦ã¿ã‚ˆã†\ntry it! é–‹ç™ºPCã§simple_control.pyã®ä¸­èº«ã‚’èª­ã‚“ã§ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¦ã¿ã‚ˆã†\nhint ã‚³ãƒ¼ãƒ‰ã‚’ç·¨é›†ã™ã‚‹ã¨ãã¯ã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½¿ã†ã“ã¨ãŒãŠã™ã™ã‚ã§ã™ã€‚æ–°ã—ãã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã„ã¦\n(é–‹ç™ºPC):~$ cd group_a/roomba_hack (é–‹ç™ºPC):~group_a/roomba_hack$ code .  ã§VScodeã‚’èµ·å‹•ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n","date":1649116800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1649116800,"objectID":"3a3eac87851dbc29e0c5e1d274ba3f31","permalink":"https://matsuolab.github.io/roomba_hack/course/chap2/rosbasic/","publishdate":"2022-04-05T00:00:00Z","relpermalink":"/roomba_hack/course/chap2/rosbasic/","section":"course","summary":"ROSã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã«ã¤ã„ã¦ç†è§£ã—ã‚ˆã†\n","tags":null,"title":"ROSã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ»ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹","type":"book"},{"authors":null,"categories":null,"content":"ã‚»ãƒ³ã‚µã®å€¤ã‚’èª­ã¿å–ã‚Šãƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†\nLearn ãƒ­ãƒœãƒƒãƒˆã‚»ãƒ³ã‚µã®åŸºç¤çŸ¥è­˜ ãƒ­ãƒœãƒƒãƒˆãŒå‹•ä½œã™ã‚‹ãŸã‚ã«å¿…è¦ãªã‚»ãƒ³ã‚µã¯å¤§ãã2ç¨®é¡ã«åˆ†ã‘ã‚‰ã‚Œã‚‹ã€‚\n1ã¤ç›®ãŒå¤–ç•Œã‚»ãƒ³ã‚µã§ã€ã“ã‚Œã¯ãƒ­ãƒœãƒƒãƒˆãŒè¡Œå‹•ã™ã‚‹ç’°å¢ƒã®æƒ…å ±ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®ã‚»ãƒ³ã‚µãƒ¼ã§ã‚ã‚‹ã€‚ å…·ä½“çš„ãªã‚»ãƒ³ã‚µã¨ã—ã¦ã€\n LiDAR ãƒ‡ãƒ—ã‚¹ã‚«ãƒ¡ãƒ© ãƒ›ã‚¤ãƒ¼ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ IMU  ãªã©ãŒã‚ã’ã‚‰ã‚Œã‚‹ã€‚\nã‚»ãƒ³ã‚µã®ãƒã‚¤ã‚ºã®å½±éŸ¿ã‚’è»½æ¸›ã™ã‚‹ãŸã‚ã€è¤‡æ•°ã®ã‚»ãƒ³ã‚µã‚’çµ„ã¿åˆã‚ã›ã¦åˆ©ç”¨ã•ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã€‚\n2ã¤ç›®ã¯å†…ç•Œã‚»ãƒ³ã‚µã§ã€ã“ã‚Œã¯(ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ ã®ã‚ˆã†ãªå¤‰å½¢å¯èƒ½ãª)ãƒ­ãƒœãƒƒãƒˆãŒè‡ªèº«ã®å†…éƒ¨çŠ¶æ…‹ã‚’æŠŠæ¡ã—ã€ä½ç½®ã‚„å§¿å‹¢ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã«ä½¿ã‚ã‚Œã‚‹ã‚»ãƒ³ã‚µãƒ¼ã§ã‚ã‚‹ã€‚\n é–¢ç¯€ä½ç½®ãƒ»è§’åº¦ã‚»ãƒ³ã‚µ é–¢ç¯€å§¿å‹¢ã‚»ãƒ³ã‚µ  ãªã©ãŒå†…ç•Œã‚»ãƒ³ã‚µã§ã‚ã‚‹ã€‚\nå‚è€ƒ\n https://www.jsme.or.jp/jsme-medwiki/14:1013897#:~:text=robot%20sensor ","date":1649116800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1649116800,"objectID":"ff51cff84b07cbb120bc73f6c20e4a6b","permalink":"https://matsuolab.github.io/roomba_hack/course/chap2/sensing1/","publishdate":"2022-04-05T00:00:00Z","relpermalink":"/roomba_hack/course/chap2/sensing1/","section":"course","summary":"ã‚»ãƒ³ã‚µã®å€¤ã‚’èª­ã¿å–ã‚Šãƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†\n","tags":null,"title":"ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘ ","type":"book"},{"authors":null,"categories":null,"content":"è¤‡æ•°ã®ã‚»ãƒ³ã‚µã‚’çµ„ã¿åˆã‚ã›ã¦ã‚ˆã‚Šã‹ã—ã“ããƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†\nLearn LiDARã®ã‚¹ã‚­ãƒ£ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ï¼Œéšœå®³ç‰©ã‚’å›é¿ã—ã¦ã¿ã‚ˆã† æ¬¡ã«ï¼ŒLiDARã§ã‚¹ã‚­ãƒ£ãƒ³ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ï¼Œéšœå®³ç‰©ã‚’å›é¿ã™ã‚‹ã‚ˆã†ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼\nLiDARã‚¹ã‚­ãƒ£ãƒ³ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆ/scanï¼‰ã®ä¸­èº«ã‚’è¦‹ã¦ã¿ã‚ˆã† LiDARã¯ï¼ŒLight Detection And Rangingã®ç•¥ã§ï¼Œãƒ¬ãƒ¼ã‚¶å…‰ã‚’ä½¿ã£ã¦é›¢ã‚ŒãŸå ´æ‰€ã«ã‚ã‚‹ç‰©ä½“å½¢çŠ¶ã‚„è·é›¢ã‚’æ¸¬å®šã™ã‚‹ãŸã‚ã®ã‚»ãƒ³ã‚µã§ã™ï¼ è¿‘å¹´ã§ã¯ï¼Œè‡ªå‹•è»Šã®è‡ªå‹•é‹è»¢ã«ã‚‚ç”¨ã„ã‚‰ã‚Œã‚‹ã“ã¨ã®å¤šã„ã‚»ãƒ³ã‚µã®ä¸€ã¤ã§ã™ï¼\nroombaã«æ­è¼‰ã•ã‚ŒãŸLiDARã‚»ãƒ³ã‚µï¼ˆrplidarï¼‰ã®å€¤ã¯ï¼Œ/scanã®ãƒˆãƒ”ãƒƒã‚¯ã«æµã‚Œã¦ã„ã¦ï¼Œrostopic echo /scanã‚’ã—ã¦ã¿ã‚‹ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦ã©ã‚“ãªæƒ…å ±ãŒæµã‚Œã¦ã„ã‚‹ã‹ã‚ã‹ã‚Šã¾ã™ï¼\nå¤§ããªãƒ‡ãƒ¼ã‚¿ãªã®ã§ä»Šå›ã¯ãƒ†ã‚­ã‚¹ãƒˆã«æ²è¼‰ã™ã‚‹ã®ã¯çœç•¥ã—ã¾ã™ãŒï¼Œrostopic type /scanã‚’ã—ã¦ã¿ã‚‹ã¨ï¼Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦ï¼Œsensor_msgs/LaserScanå‹ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ï¼ rostopic type /scan root@dynamics:~/roomba_hack# rostopic type /scan sensor_msgs/LaserScan  \nsensor_msgs/LaserScanå‹ã®å®šç¾©ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‹ã®å®šç¾©ã¯ï¼Œãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã»ã‹ï¼Œrosmsg info sensor_msgs/LaserScanã™ã‚‹ã“ã¨ã§ã‚‚ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰ç¢ºèªã§ãã¾ã™ï¼ rosmsg info sensor_msgs/LaserScan root@dynamics:~/roomba_hack# rosmsg info sensor_msgs/LaserScan std_msgs/Header header uint32 seq time stamp string frame_id float32 angle_min float32 angle_max float32 angle_increment float32 time_increment float32 scan_time float32 range_min float32 range_max float32[] ranges float32[] intensities  \nangle_minã«ã¯ã‚¹ã‚­ãƒ£ãƒ³ã®é–‹å§‹è§’åº¦ï¼Œangle_maxã«ã¯ã‚¹ã‚­ãƒ£ãƒ³ã®çµ‚äº†è§’åº¦ãŒãƒ©ã‚¸ã‚¢ãƒ³ã§è¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ï¼ angle_incrementã¯ï¼Œè¨ˆæ¸¬ã—ãŸé–“éš”ãŒãƒ©ã‚¸ã‚¢ãƒ³ã§è¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ï¼ range_maxã«ã¯ã‚¹ã‚­ãƒ£ãƒ³ã®é–“ã§æ¤œå‡ºã•ã‚ŒãŸæœ€å¤§ã®è·é›¢ï¼Œrange_minã«ã¯æœ€å°ã®è·é›¢ãŒãƒ¡ãƒ¼ãƒˆãƒ«ã§è¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ï¼\nrvizã§LiDARã‚¹ã‚­ãƒ£ãƒ³ã®å€¤ã‚’å¯è¦–åŒ–ã—ã¦ã¿ã‚ˆã† rvizã§LiDARã®ã‚¹ã‚­ãƒ£ãƒ³çµæœã‚’å¯è¦–åŒ–ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼\nLaserScanã‚’Addã—ã¦ï¼Œtopicã«/scanã‚’è¨­å®šã™ã‚‹ã¨ï¼Œä»¥ä¸‹ã®ã‚ˆã†ã«ï¼Œãƒ­ãƒœãƒƒãƒˆã‚’ä¸­å¿ƒã«LiDARã«ã‚ˆã£ã¦è¨ˆæ¸¬ã•ã‚ŒãŸéšœå®³ç‰©ãŒèµ¤ãè¡¨ç¤ºã•ã‚Œã¾ã™ï¼\n  LiDARã‚¹ã‚­ãƒ£ãƒ³ã‚’rvizã§å¯è¦–åŒ–  LiDARã‚’ä½¿ã£ã¦éšœå®³ç‰©ã‚’å›é¿ã—ã‚ˆã† ãã‚Œã§ã¯ï¼ŒLiDARã‚¹ã‚­ãƒ£ãƒ³/scenã®æƒ…å ±ã‚’ä½¿ã£ãŸåˆ¶å¾¡ã®å®Ÿè£…ã®ä¾‹ã¨ã—ã¦navigation_tutorialãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸­ã®avoidance.pyã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼ˆgithubï¼‰ï¼\nã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯ï¼ŒLiDARã‚’ä½¿ã£ã¦é€²è¡Œæ–¹å‘ã«å­˜åœ¨ã™ã‚‹éšœå®³ç‰©ã‚’è¦‹ã¤ã‘ï¼Œãã‚Œã‚’å›é¿ã—ãªãŒã‚‰é€²ã‚€ã‚ˆã†ã«ãƒ­ãƒœãƒƒãƒˆã‚’åˆ¶å¾¡ã—ã¦ã„ã¾ã™ï¼å…·ä½“çš„ã«ã¯ï¼Œ\n ãƒ­ãƒœãƒƒãƒˆã®é€²è¡Œæ–¹å‘ã«ç‰©ä½“ãŒãªã‹ã£ãŸã‚‰ç›´é€² ãƒ­ãƒœãƒƒãƒˆã®å³å´ã«éšœå®³ç‰©ãŒã‚ã£ãŸã‚‰å·¦å›è»¢ ãƒ­ãƒœãƒƒãƒˆã®å·¦å´ã«éšœå®³ç‰©ãŒã‚ã£ãŸã‚‰å³å›è»¢  ã™ã‚‹ã“ã¨ã§éšœå®³ç‰©ã‚’å›é¿ï¼ˆã¶ã¤ã‹ã‚‹å‰ã«æ–¹å‘è»¢æ›ï¼‰ã—ã¦ã„ã¾ã™ï¼\nã§ã¯ï¼Œãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä¸­èº«ã‚’è¦‹ã¦ã„ãã¾ã™ï¼\n/odomã‚’ä½¿ã£ãŸåˆ¶å¾¡ã®å ´åˆã¨åŒæ§˜ã«ï¼Œãƒãƒ¼ãƒ‰ã‚’å®šç¾©ã™ã‚‹éš›ã«ï¼Œã‚³ãƒãƒ³ãƒ‰ã‚’é€ã‚‹ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ£ã¨ï¼ŒLiDARã‚¹ã‚­ãƒ£ãƒ³ã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚‹ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒã‚’ä½œæˆã—ã¾ã™ï¼\nclass Avoidance: def __init__(self): rospy.init_node('avoidance', anonymous=True) # Publisher self.cmd_vel_pub = rospy.Publisher('/planner/cmd_vel', Twist, queue_size=10) # Subscriber scan_sub = rospy.Subscriber('/scan', LaserScan, self.callback_scan) self.min_range = None  /scanã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¯ï¼Œ\ndef callback_scan(self, data): fov = np.deg2rad(60) min_range = data.range_max min_idx = -1 angle = data.angle_min for idx, r in enumerate(data.ranges): angle += data.angle_increment if -fov\u0026lt;angle\u0026lt;fov: if r\u0026lt;min_range: min_range = r min_idx = idx if min_idx \u0026lt; len(data.ranges)/2.0: self.direction = \u0026quot;RIGHT\u0026quot; else: self.direction = \u0026quot;LEFT\u0026quot; self.min_range = min_range  ã¨ãªã£ã¦ãŠã‚Šï¼Œæ­£é¢ã‹ã‚‰å·¦å³60åº¦ã®ç¯„å›²å†…ã§æœ€ã‚‚çŸ­ã„è·é›¢ã‚’self.min_rangeã«æ ¼ç´ã—ï¼Œãã‚ŒãŒå³å´ã«ã‚ã‚‹ã®ã‹å·¦å´ã«ã‚ã‚‹ã®ã‹ã‚’self.directionã«æ ¼ç´ã—ã¦ã„ã¾ã™ï¼ï¼\nã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹ã¨processãƒ¡ã‚½ãƒƒãƒ‰ãŒï¼ˆ0.1ç§’ãŠãã«ï¼‰å¸¸ã«å®Ÿè¡Œã•ã‚Œã¾ã™ï¼\ndef process(self): r = rospy.Rate(10) while not rospy.is_shutdown(): vel = Twist() if self.min_range is not None: if self.min_range \u0026gt;= 0.4: vel.linear.x = 0.2 vel.angular.z = 0.0 else: vel.linear.x = 0.0 if self.direction == \u0026quot;RIGHT\u0026quot;: vel.angular.z = 0.5 elif self.direction == \u0026quot;LEFT\u0026quot;: vel.angular.z = -0.5 self.cmd_vel_pub.publish(vel) r.sleep()  processãƒ¡ã‚½ãƒƒãƒ‰å†…éƒ¨ã§ã¯ï¼Œæ ¼ç´ã•ã‚ŒãŸself.min_rangeãŒ0.4ï¼ˆãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰ã‚ˆã‚Šå¤§ãã„å ´åˆã¯ï¼Œãƒ­ãƒœãƒƒãƒˆã®å‰ã«ä½•ã‚‚ãªã„ã¨åˆ¤æ–­ã—ã¦ç›´é€²ï¼Œå°ã•ã„å ´åˆã¯ï¼Œself.directionã®å€¤ã‚’è¦‹ã¦ï¼ŒRIGHTã§ã‚ã‚Œã°å³ã«éšœå®³ç‰©ãŒã‚ã‚‹ã¨åˆ¤æ–­ã—ã¦å·¦å›è»¢ï¼ŒLEFTã§ã‚ã‚Œã°å·¦ã«éšœå®³ç‰©ãŒã‚ã‚‹ã¨åˆ¤æ–­ã—ã¦å³å›è»¢ã™ã‚‹ã‚ˆã†ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ãªã£ã¦ã„ã¾ã™ï¼\nãã‚Œã§ã¯ï¼Œå®Ÿéš›ã«LiDARã‚’ä½¿ã£ã¦éšœå®³ç‰©ã‚’å›é¿ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼\næ¼”ç¿’ ROSãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¯è¦–åŒ– ã€é–‹ç™ºPCã€‘topicã®ç¢ºèª /scanã®å‹ã‚’ç¢ºèª\n(é–‹ç™ºPC)(docker):~/roomba_hack# rostopic type /scan  /scanã®ä¸­èº«ã‚’ç¢ºèª\n(é–‹ç™ºPC)(docker):~/roomba_hack# rostopic echo /scan   LiDARã‚¹ã‚­ãƒ£ãƒ³ã‚’ä½¿ã£ãŸãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åˆ¶å¾¡ avoidance.pyã‚’å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†ï¼\nã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å‹•ã‹ã™ã¨ãã«ã¯ï¼Œã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã®Yãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã‹ã‚‰Bãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦autoãƒ¢ãƒ¼ãƒ‰ã«ã—ã¦ãŠãã¾ã—ã‚‡ã†ï¼\nä»Šå›ã¯ã›ã£ã‹ããªã®ã§ï¼Œlaunchfileã‹ã‚‰èµ·å‹•ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼ ã“ã®launchfileã¯ï¼Œnavigation_tutorialãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸­ã®launchãƒ•ã‚©ãƒ«ãƒ€ã®ä¸­ã«ã‚ã‚‹avoidance.launchã«è¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ï¼ˆgithubï¼‰ï¼\n(é–‹ç™ºPC)(docker):~/roomba_hack# roslaunch navigation_tutorial avoidance.launch  ãƒ­ãƒœãƒƒãƒˆã®é€²è¡Œæ–¹å‘ã«éšœå®³ç‰©ãŒã‚ã‚‹ã¨ãã«ï¼Œãã‚Œã‚’é¿ã‘ã‚‹ã‚ˆã†ã«æ–¹å‘è»¢æ›ã—ãŸã‚‰æˆåŠŸã§ã™ï¼\ntry it! avoidance.pyã®ä¸­èº«ã‚’èª­ã‚“ã§ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¦ã¿ã‚ˆã†\n","date":1649116800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1649116800,"objectID":"4115bb19a4232d2372987cbff0c843fc","permalink":"https://matsuolab.github.io/roomba_hack/course/chap3/sensing3/","publishdate":"2022-04-05T00:00:00Z","relpermalink":"/roomba_hack/course/chap3/sensing3/","section":"course","summary":"è¤‡æ•°ã®ã‚»ãƒ³ã‚µã‚’çµ„ã¿åˆã‚ã›ã¦ã‚ˆã‚Šã‹ã—ã“ããƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†\n","tags":null,"title":"ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ã‚»ãƒ³ã‚·ãƒ³ã‚°ãƒ»ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»é€šä¿¡â‘¢","type":"book"},{"authors":null,"categories":null,"content":"ãƒ­ãƒœãƒƒãƒˆé–‹ç™ºã«ã‚ˆãç”¨ã„ã‚‰ã‚Œã‚‹ROSã®æ¦‚è¦ã‚’ç†è§£ã™ã‚‹\nLearn ROSã®æ¦‚è¦ ROS(Robot Operating System)ã¯ã€ãƒ­ãƒœãƒƒãƒˆãƒ»ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆã‚’æ”¯æ´ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ãƒ„ãƒ¼ãƒ«ã‚’æä¾›ã™ã‚‹ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§ã™ã€‚ å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã«ã‚ã’ã‚‹ã‚‚ã®ã‚’ROSã¯æä¾›ã—ã¦ã„ã¾ã™ã€‚\n  ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€šä¿¡\nãƒ—ãƒ­ã‚»ã‚¹é–“ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿é–“ã®é€šä¿¡ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚ç”¨é€”ã«å¿œã˜ã¦ã€å¤šå¯¾å¤šã‚„ä¸€å¯¾å¤šã€éåŒæœŸã€åŒæœŸãªã©ã®é€šä¿¡å½¢æ…‹ã‚’é¸æŠã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n  ãƒ‡ãƒã‚¤ã‚¹ãƒ‰ãƒ©ã‚¤ãƒ\nãƒ­ãƒœãƒƒãƒˆã«æ­è¼‰ã•ã‚Œã‚‹å¤šãã®ã‚»ãƒ³ã‚µã‚„ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚¿ãŒROSã®APIã§æ¨™æº–åŒ–ã•ã‚ŒãŸå½¢ã§æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚\nhttps://github.com/ros-drivers http://wiki.ros.org/Sensors\n  ãƒ©ã‚¤ãƒ–ãƒ©ãƒª\nãƒ­ãƒœãƒƒãƒˆã‚’å‹•ä½œã•ã›ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢(ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒãƒ‹ãƒ”ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³)ã®åŸºæœ¬æ©Ÿèƒ½ã®å¤§åŠãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚\n  è¦–è¦šåŒ–ãƒ„ãƒ¼ãƒ«\nãƒ­ãƒœãƒƒãƒˆã®å†…éƒ¨çŠ¶æ…‹ã‚„ã‚»ãƒ³ã‚µå‡ºåŠ›ã‚’2æ¬¡å…ƒã€3æ¬¡å…ƒã§è¦–è¦šåŒ–ã™ã‚‹Rvizã‚„3æ¬¡å…ƒå‹•åŠ›å­¦ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã®Gazeboãªã©ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚\n  ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†\nå¤šç¨®å¤šæ§˜ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª(python, C++, \u0026hellip;)ã€ä¾å­˜é–¢ä¿‚ã§è¨˜è¿°ã•ã‚ŒãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ (ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸)åŒå£«ã‚’çµ±åˆçš„ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã€ãƒ“ãƒ«ãƒ‰ã€ãƒ†ã‚¹ãƒˆã€ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚\nãŸã¨ãˆã°ã€çµŒè·¯è¨ˆç”»ãªã©å‡¦ç†ãŒé‡ã„ãƒ—ãƒ­ã‚»ã‚¹ã¯C++ã§ã€ç”»åƒèªè­˜ãªã©æ©Ÿæ¢°å­¦ç¿’ç³»ã®ãƒ—ãƒ­ã‚»ã‚¹ã¯pythonã§å®Ÿè£…ã—ã€ãã‚Œã‚‰ãƒ—ãƒ­ã‚»ã‚¹é–“ã®é€šä¿¡ã‚’å®¹æ˜“ã«å®Ÿè£…ã§ãã‚‹ã€‚\n  ROSã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€šä¿¡ ãƒ­ãƒœãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ã§ã¯ã€å¤šæ•°ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä¸¦åˆ—ã«å®Ÿè¡Œã—ã€ãã‚Œãã‚ŒãŒãƒ‡ãƒ¼ã‚¿ã‚’ã‚„ã‚Šã¨ã‚Šã—ã¾ã™ã€‚ ãã‚Œã‚‰ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ é–“ã®é€šä¿¡ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ROSã¯æä¾›ã—ã¾ã™ã€‚\n  ãƒãƒ¼ãƒ‰(node)\nROSã§ã¯ã€ä¸€ã¤ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ å˜ä½ã‚’ã€Œãƒãƒ¼ãƒ‰(node)ã€ã¨å‘¼ã³ã¾ã™ã€‚ ãƒãƒ¼ãƒ‰ã¯ã€ROSã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ã¦ã€ä»–ã®ãƒãƒ¼ãƒ‰ã¨ãƒ‡ãƒ¼ã‚¿ã‚’ã‚„ã‚Šã¨ã‚Šã—ã¾ã™ã€‚ ROSã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ç•°ãªã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§è¨˜è¿°ã•ã‚ŒãŸãƒãƒ¼ãƒ‰ãŒã‚„ã‚Šã¨ã‚Šã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ ãƒãƒ¼ãƒ‰ã¯ã€æ¬¡ã«è¿°ã¹ã‚‹ãƒˆãƒ”ãƒƒã‚¯ã®é…ä¿¡ãƒ»è³¼èª­ã€ã¾ãŸã¯ã‚µãƒ¼ãƒ“ã‚¹ã®æä¾›ãƒ»ä½¿ç”¨ãŒå¯èƒ½ã§ã™ã€‚\n  ãƒˆãƒ”ãƒƒã‚¯(topic)\nROSã§ã®ã€æ¨™æº–çš„ãªãƒ‡ãƒ¼ã‚¿é€šä¿¡ã®çµŒè·¯ã‚’ã€Œãƒˆãƒ”ãƒƒã‚¯(topic)ã€ã¨å‘¼ã³ã¾ã™ã€‚ ãƒãƒ¼ãƒ‰ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒˆãƒ”ãƒƒã‚¯ã¸å‘ã‘ã¦é…ä¿¡(Publish)ã—ã€åŒæ§˜ã«è³¼èª­ã™ã‚‹(Subscribe)ã“ã¨ã§ãƒˆãƒ”ãƒƒã‚¯ã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nãƒˆãƒ”ãƒƒã‚¯ã«ã¯åå‰ãŒä»˜ã‘ã‚‰ã‚Œã€åŒã˜ãƒˆãƒ”ãƒƒã‚¯ã«è¤‡æ•°ã®ãƒãƒ¼ãƒ‰ãŒãƒ‡ãƒ¼ã‚¿ã‚’é€ã‚Šã€è¤‡æ•°ã®ãƒãƒ¼ãƒ‰ãŒãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n  ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸(message)\nãƒˆãƒ”ãƒƒã‚¯ã¸é…ä¿¡ã—ãŸã‚Šã€è³¼èª­ã—ãŸã‚Šã™ã‚‹ã¨ãã®ROSã®ãƒ‡ãƒ¼ã‚¿å‹ã®ã“ã¨ã‚’ã€Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸(message)ã€ã¨å‘¼ã³ã¾ã™ã€‚ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å‹ã¯msgãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã•ã‚Œã¦ãŠã‚Šã€ä½¿ç”¨è¨€èªã«ä¾å­˜ã—ãªã„ãƒ‡ãƒ¼ã‚¿å½¢å¼ã«ãªã£ã¦ã„ã¾ã™ã€‚\nä»¥ä¸‹ã«ã€ç‰©ä½“ã‚„ãƒ­ãƒœãƒƒãƒˆã®ä½ç½®ã‚’è¡¨ã™æ™‚ã«ã‚ˆãç”¨ã„ã‚‹geomemtry_msgs/PoseStampedå‹ã®msgãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¤ºã—ã¾ã™ã€‚ ä½ç½®æƒ…å ±ã®æ™‚é–“ã‚„åº§æ¨™ãƒ•ãƒ¬ãƒ¼ãƒ ã®æƒ…å ±ãŒå«ã¾ã‚Œã‚‹headerã¨åº§æ¨™ä½ç½®ã‚’è¡¨ã™poseã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚\nstd_msgs/Header header uint32 seq time stamp string frame_id geometry_msgs/Pose pose geometry_msgs/Point position float64 x float64 y float64 z geometry_msgs/Quaternion orientation float64 x float64 y float64 z float64 w    ã‚µãƒ¼ãƒ“ã‚¹(service)\nã€Œã‚µãƒ¼ãƒ“ã‚¹(service)ã€ã¯ãƒãƒ¼ãƒ‰ãŒä»–ã®ãƒãƒ¼ãƒ‰ã¨ãŠäº’ã„ã«é€šä¿¡ã™ã‚‹ãŸã‚ã®ä¸€ã¤ã®æ‰‹æ®µã§ã™ã€‚ ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã¦ã„ã‚‹ãƒãƒ¼ãƒ‰ã«å¼•æ•°ã‚’æ¸¡ã—ã¦ã€é–¢æ•°ã®å®Ÿè¡Œçµæœã‚’æˆ»ã‚Šå€¤ã¨ã—ã¦å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nå‘¼ã³å‡ºã•ã‚Œã‚‹å´ã®ãƒãƒ¼ãƒ‰ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹åã¨ãƒ‡ãƒ¼ã‚¿å½¢å¼ã®å®£è¨€ã‚’ã€Œã‚¢ãƒ‰ãƒã‚¿ã‚¤ã‚º(advertise)ã€ã—ã€å‘¼ã³å‡ºã™å´ã®ãƒãƒ¼ãƒ‰ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã€Œã‚³ãƒ¼ãƒ«(call)ã€ã—ã¾ã™ã€‚\nã‚µãƒ¼ãƒ“ã‚¹ã«ãŠã„ã¦é€å—ä¿¡ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®å‹ã¯srvãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ã€‚ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨åŒæ§˜ä½¿ç”¨è¨€èªã«ä¾å­˜ã—ãªã„ãƒ‡ãƒ¼ã‚¿å½¢å¼ã§ã™ãŒã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ç•°ãªã‚‹ã®ã¯ã€å¼•æ•°ã¨æˆ»ã‚Šå€¤ã®äºŒã¤ã®å½¢å¼ã‚’å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨ã“ã‚ã§ã™ã€‚\nä»¥ä¸‹ã«ã€srvã®ä¾‹ã¨ã—ã¦std_srvs/SetBoolã‚’ç¤ºã—ã¾ã™ã€‚ ã“ã®ã‚ˆã†ã«å¼•æ•°ã¨æˆ»ã‚Šå€¤ã®é–“ã«---ã‚’å…¥ã‚Œã¦å®šç¾©ã—ã¾ã™ã€‚\nbool data --- bool success string message    ROSãƒã‚¹ã‚¿(ROS master)\nã€ŒROSãƒã‚¹ã‚¿(ROS master)ã€ã¯ã€ãƒãƒ¼ãƒ‰ã€ãƒˆãƒ”ãƒƒã‚¯ãŠã‚ˆã³ã‚µãƒ¼ãƒ“ã‚¹ã®åå‰ç™»éŒ²ã‚’è¡Œã„ã€ãã‚Œãã‚Œã®ãƒãƒ¼ãƒ‰ãŒä»–ã®ãƒãƒ¼ãƒ‰ã‹ã‚‰è¦‹ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹å½¹å‰²ã‚’æ‹…ã£ã¦ã„ã¾ã™ã€‚ é€šä¿¡ã™ã‚‹ãƒãƒ¼ãƒ‰åã¨ãƒˆãƒ”ãƒƒã‚¯åãŠã‚ˆã³ã‚µãƒ¼ãƒ“ã‚¹åã®å¯¾å¿œãŒæ±ºå®šã—ãŸå¾Œã€ãƒãƒ¼ãƒ‰åŒå£«ãŒã€Œpeer-to-peerã€ã§é€šä¿¡ã—ã¾ã™ã€‚\nROSãƒã‚¹ã‚¿ã¨ãƒãƒ¼ãƒ‰é–“ã®é€šä¿¡ã¯XML-RPCã‚’ç”¨ã„ã¦è¡Œã‚ã‚Œã¾ã™ã€‚ ROSãƒã‚¹ã‚¿ã‚’èµ·å‹•ã™ã‚‹ã«ã¯ã€Œroscoreã€ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚\n  ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚µãƒ¼ãƒ(parameter server)\nã€Œãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚µãƒ¼ãƒ(parameter server)ã€ã¯ã€è¨­å®šãƒ‡ãƒ¼ã‚¿ã‚’è¤‡æ•°ã®ãƒãƒ¼ãƒ‰ã§å…±æœ‰ã™ã‚‹ãŸã‚ã®è»½é‡ãªã‚µãƒ¼ãƒã§ã™ã€‚ å„ãƒãƒ¼ãƒ‰ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚µãƒ¼ãƒã§ä¸€æ‹¬ã—ã¦ç®¡ç†ã§ãã¾ã™ã€‚ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚µãƒ¼ãƒã‚‚ROSãƒã‚¹ã‚¿åŒæ§˜ã«ã€Œroscoreã€ã‚³ãƒãƒ³ãƒ‰ã§èµ·å‹•ã—ã¾ã™ã€‚\nãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚µãƒ¼ãƒã§æ‰±ãˆã‚‹å‹ã¯ã€æ•´æ•°ãƒ»å°æ•°ãƒ»çœŸå½å€¤ãƒ»è¾æ›¸ãƒ»ãƒªã‚¹ãƒˆã«ãªã‚Šã¾ã™ã€‚\n  ROSã®ãƒ‡ãƒ¼ã‚¿é€šä¿¡ã®ã¾ã¨ã‚\n    ROSé€šä¿¡  ROSã¨é€£å‹•ã™ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ROSã¯ä»¥ä¸‹ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã¨é€£å‹•ã—ã¦ä½¿ã†ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚\n  OpenCV\nã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ“ã‚¸ãƒ§ãƒ³ã®æ¨™æº–çš„ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚\nOpenCVã®ãƒ‡ãƒ¼ã‚¿å½¢å¼ã§ã‚ã‚‹ã€Matã‚¯ãƒ©ã‚¹ã¨ROSã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼ã‚’å¤‰æ›ã™ã‚‹cv_bridgeã‚„ï¼“æ¬¡å…ƒåº§æ¨™ä¸Šã®ç‰©ä½“ã‚’ï¼’æ¬¡å…ƒç”»åƒä¸Šã«æŠ•å½±ã™ã‚‹æ©Ÿèƒ½ã§ã‚ã‚‹image_geometryã¨ã„ã£ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸(vision_opencv)ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚\n  PCL(Point Cloud Library)\n3æ¬¡å…ƒç‚¹ç¾¤å‡¦ç†ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚\nOpenCVåŒæ§˜PCLã®ãƒ‡ãƒ¼ã‚¿å½¢å¼ã¨ROSã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼ã‚’å¤‰æ›ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚\n  OpenSLAM, Navigation Stack\nç§»å‹•ãƒ­ãƒœãƒƒãƒˆã®è‡ªå·±ä½ç½®æ¨å®šã¨åœ°å›³ç”Ÿæˆã‚’åŒæ™‚ã«è¡Œã†SLAM(Simultaneous Localization and Mapping)ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å…¬é–‹ã™ã‚‹ãŸã‚ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¨ã€ã€‚\nROSã§ã¯OpenSLAMã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹gmappingãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã‚„ãã‚Œã¨é€£æºã—ã¦è‡ªå¾‹èµ°è¡Œã‚’å®Ÿç¾ã™ã‚‹navigationãƒ¡ã‚¿ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚\n  Move it\n  è¦–è¦šåŒ–ãƒ„ãƒ¼ãƒ«  rqt    rqt window   rviz     gazebo  æ¼”ç¿’ roomba driverã‚’èµ·å‹•ã—ã€å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹   jetsonã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹\n(é–‹ç™ºPC):~$ ssh roomba_dev1 (jetson):~$    docker containerã‚’èµ·å‹•ã™ã‚‹ ä½™è£•ãŒã‚ã‚Œã°RUN-DOCKER-CONTAINER.shãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n(jetson):~$ cd ~/team_a/roomba_hack (jetson):~/team_a/roomba_hack$ ./RUN-DOCKER-CONTAINER.sh root@roomba-dev-jetson:~/roomba_hack#  root@roomba-dev-jetson:~/roomba_hack#ãªã©ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°dockerå†…éƒ¨ã«å…¥ã‚Œã¦ã„ã¾ã™ã€‚\nä»Šå¾Œdockerå†…éƒ¨ã§ã‚ã‚‹ã“ã¨ã¯(docker)ã¨è¡¨è¨˜ã—ã¾ã™ã€‚\n  roomba driverãªã©ã‚’èµ·å‹•ã™ã‚‹launchãƒ•ã‚¡ã‚¤ãƒ«ã‚’èµ·å‹•ã™ã‚‹ ã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒ«ãƒ³ãƒã®é›»æºãŒå…¥ã£ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚\n(jetson)(docker):~/roomba_hack# roslaunch roomba_bringup bringup.launch  èµ·å‹•ã«æˆåŠŸã™ã‚Œã°ãƒ«ãƒ³ãƒã‹ã‚‰ãƒ”ãƒƒã¨çŸ­ã„éŸ³ãŒé³´ã‚Šã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ã¯èµ¤ã„æ–‡å­—ãŒå‡ºç¶šã‘ã‚‹ã¯ãšã§ã™ã€‚\n   ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’ä½¿ã£ã¦ã€ãƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã™   é–‹ç™ºPCã§docker containerã‚’èµ·å‹•ã™ã‚‹ xã«ã¯roomba_devã®å¾Œã«ã¤ãæ•°å­—ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚\n(é–‹ç™ºPC):~$ cd ~/team_a/roomba_hack (é–‹ç™ºPC):~/team_a/roomba_hack$ ./RUN-DOCKER-CONTAINER.sh 192.168.10.7x    ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’èµ·å‹• ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ãŒé–‹ç™ºPCã«åˆºã•ã£ã¦ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚\n(é–‹ç™ºPC)(docker):~/roomba_hack# cd catkin_ws (é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# catkin_make (é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws# source devel/setup.bash (é–‹ç™ºPC)(docker):~/roomba_hack/catkin_ws#roslaunch roomba_teleop teleop.launch    ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã®ãƒ¢ãƒ¼ãƒ‰\n ç§»å‹•ãƒ»åœæ­¢ è‡ªå‹•ãƒ»ãƒãƒ‹ãƒ¥ã‚¢ãƒ« ãƒ‰ãƒƒã‚­ãƒ³ã‚°ãƒ»ã‚¢ãƒ³ãƒ‰ãƒƒã‚­ãƒ³ã‚°    ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã«ã‚ˆã‚‹æ“ç¸¦\n ç§»å‹•ãƒ­ãƒƒã‚¯è§£é™¤ L1ã‚’æŠ¼ã—ã¦ã„ã‚‹æ™‚ã®ã¿ç§»å‹•ã‚³ãƒãƒ³ãƒ‰ãŒå‹•ä½œã—ã¾ã™ã€‚ å·¦ã‚¸ãƒ§ã‚¤ã‚¹ãƒ†ã‚£ãƒƒã‚¯ ç¸¦æ–¹å‘ã§å‰é€²é€Ÿåº¦(æ‰‹å‰ã«å€’ã™ã¨ãƒãƒƒã‚¯)ã€æ¨ªæ–¹å‘ã¯å›è»¢é€Ÿåº¦ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚ å·¦çŸ¢å° ãã‚Œãã‚Œã€ä¸€å®šã«ä½é€Ÿåº¦ã§å‰é€²ãƒ»å¾Œé€€ãƒ»å›è»¢ã—ã¾ã™ã€‚    æ­£å¸¸ã«èµ·å‹•ã§ãã¦ã„ã‚‹ã‹ã‚’ç¢ºèª é–‹ç™ºPCã§æ–°ã—ãã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã„ã¦dockerã®ä¸­ã«å…¥ã‚Šã¾ã™ã€‚\nã™ã§ã«é–‹ç™ºPCã§èµ·å‹•ã•ã‚Œã¦ã„ã‚‹dockerã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã‚‹å ´åˆã¯ã€\n(é–‹ç™ºPC):~/group_a/roomba_hack$ docker exec -it roomba_hack bash  ã¾ãŸã¯\n(é–‹ç™ºPC):~/group_a/roomba_hack$ ./RUN-DOCKER-CONTAINER.sh  ã®ã„ãšã‚Œã‹ã®æ–¹æ³•ã§å…¥ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nã•ã¾ã–ã¾ãªã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦roombaã®æƒ…å ±ã‚’å–å¾—ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n(é–‹ç™ºPC)(docker):~/roomba_hack# rosnode list (é–‹ç™ºPC)(docker):~/roomba_hack# rostopic list (é–‹ç™ºPC)(docker):~/roomba_hack# rostopic echo /cmd_vel (é–‹ç™ºPC)(docker):~/roomba_hack# rqt_graph (é–‹ç™ºPC)(docker):~/roomba_hack# rviz    ","date":1642809600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1642809600,"objectID":"20855653654f6e28e5120898d90797bd","permalink":"https://matsuolab.github.io/roomba_hack/course/chap1/ros/","publishdate":"2022-01-22T00:00:00Z","relpermalink":"/roomba_hack/course/chap1/ros/","section":"course","summary":"ãƒ­ãƒœãƒƒãƒˆé–‹ç™ºã«ã‚ˆãç”¨ã„ã‚‰ã‚Œã‚‹ROSã®æ¦‚è¦ã‚’ç†è§£ã™ã‚‹\n","tags":null,"title":"ROSã¨ã¯","type":"book"},{"authors":null,"categories":null,"content":"Learn Navigationã‚·ã‚¹ãƒ†ãƒ  ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€åœ°å›³ä¸Šã®ä»»æ„ã®ç›®æ¨™åœ°ç‚¹ã¸ã€éšœå®³ç‰©ã‚’é¿ã‘ãªãŒã‚‰ãªã‚‹ã¹ãæ—©ãè‡ªå¾‹ã—ã¦ç§»å‹•ã™ã‚‹ã“ã¨ãŒç›®çš„ã§ã™ã€‚\nãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã®å‡ºåŠ›ã¯ãƒ­ãƒœãƒƒãƒˆã¸ã®è¡Œå‹•æŒ‡ä»¤å€¤(é€Ÿåº¦ãªã©)ã§ã™ãŒã€å…¥åŠ›ã¯ä»¥ä¸‹ã®4ã¤ã«ãªã‚Šã¾ã™ã€‚\n åœ°å›³ ç›®æ¨™ä½ç½® è‡ªå·±ä½ç½®æ¨å®šçµæœ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®ã‚»ãƒ³ã‚µæƒ…å ±(LiDARã‚¹ã‚­ãƒ£ãƒ³æƒ…å ±ãªã©)  ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€åœ°å›³å…¨ä½“ã¨ãƒ­ãƒœãƒƒãƒˆå‘¨è¾º(ã‚»ãƒ³ã‚µã§è¦‹ãˆã‚‹ç¯„å›²)ã®å¤§ãã2ã¤ã«åˆ†ã‘ã¦è€ƒãˆã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚\nåœ°å›³å…¨ä½“ã‚’è€ƒãˆã‚‹ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‘ã‚¹ãƒ—ãƒ©ãƒ³ã§ã¯ã€åœ°å›³æƒ…å ±ã¨ã‚´ãƒ¼ãƒ«æƒ…å ±ã‹ã‚‰å¤§ã¾ã‹ãªã‚´ãƒ¼ãƒ«ã¾ã§ã®çµŒè·¯ã‚’ç®—å‡ºã—ã¾ã™ã€‚\nãƒ­ãƒœãƒƒãƒˆå‘¨è¾ºã‚’è€ƒãˆã‚‹ ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ã‚¹ãƒ—ãƒ©ãƒ³ã§ã¯ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ã§ç®—å‡ºã—ãŸçµŒè·¯ã«æ²¿ã†ã‚ˆã†ã«ã—ã¤ã¤ã€å‘¨è¾ºã®éšœå®³ç‰©æƒ…å ±ã‚’é¿ã‘ã‚‹è¡Œå‹•æŒ‡ä»¤å€¤ã‚’ç®—å‡ºã—ã¾ã™ã€‚\nãã‚Œãã‚Œã®çµŒè·¯ã‚’è€ƒãˆã‚‹ã«ã‚ãŸã£ã¦ã€çµŒè·¯ã®ã‚³ã‚¹ãƒˆãŒã©ã†ãªã‚‹ã‹é‡è¦ã«ãªã‚Šã¾ã™ã€‚ ã“ã®ã‚³ã‚¹ãƒˆã‚’è¡¨ç¾ã™ã‚‹æ–¹æ³•ã¨ã—ã¦ã€ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—ãŒç”¨ã„ã‚‰ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚\n  Navigationã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦(from ROS wiki)  Cost Map ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—ã¯ã€çµŒè·¯ã‚’ç®—å‡ºã™ã‚‹ãŸã‚ã«ç”¨ã„ã‚‹ã“ã¨ã‹ã‚‰ã€æ‰±ã„ã‚„ã™ã„ã‚°ãƒªãƒƒãƒˆä¸Šã®å æœ‰æ ¼å­åœ°å›³ã¨ã„ã†å½¢ã§è¡¨ç¾ã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚\n(ç©ºã‚’é£›ã‚“ã ã‚Šã€3æ¬¡å…ƒåœ°å½¢ã‚’è€ƒãˆãªãã¦ã„ã„å ´åˆã¯ã€åŸºæœ¬2æ¬¡å…ƒã§è¡¨ç¾ã—ã¾ã™ã€‚)\nçµŒè·¯ã¯æ ¼å­åœ°å›³ä¸Šã§ã€ç‚¹ã§æ‰±ã†ã“ã¨ãŒå¤šã„ã§ã™ãŒã€ãƒ­ãƒœãƒƒãƒˆè‡ªèº«ã¯ã‚ã‚‹ç¨‹åº¦ã®å¤§ãã•ã‚’æŒã£ã¦ã„ã‚‹ã®ã§ã€ã‚¹ã‚­ãƒ£ãƒ³æƒ…å ±ã§å¾—ã‚‰ã‚ŒãŸç‚¹ã‚®ãƒªã‚®ãƒªã«çµŒè·¯ã‚’ç”Ÿæˆã™ã‚‹ã¨ã€è¡çªã—ã¦ã—ã¾ã—ã¾ã™ã€‚\nãã®ãŸã‚ã€ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—ã§ã¯ä»¥ä¸‹ã®å›³ã®ã‚ˆã†ã«ã‚¹ã‚­ãƒ£ãƒ³ã§å¾—ã‚‰ã‚ŒãŸç‚¹(å›³ä¸­ã®èµ¤ç‚¹)ã‹ã‚‰ã€ãƒ­ãƒœãƒƒãƒˆãŒå…¥ã£ã¦ã»ã—ããªã„ç¯„å›²ã«ã‚³ã‚¹ãƒˆ(å›³ä¸­ã®é’ãå¡—ã‚Šã¤ã¶ã•ã‚Œã¦ã„ã‚‹ã¨ã“ã‚)ãŒä»˜ä¸ã™ã‚‹ã¨ã„ã†è¡¨ç¾ã‚’ã—ã¾ã™ã€‚\n  ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—æ¦‚è¦(from ROS wiki)  Global Path Planning ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‘ã‚¹ãƒ—ãƒ©ãƒ³ã®ä¾‹ã¨ã—ã¦ã€ã‚°ãƒ©ãƒ•æ¢ç´¢ã‚’åˆ©ç”¨ã—ãŸãƒ€ã‚¤ã‚¯ã‚¹ãƒˆãƒ©æ³•ã‚„A*æ³•ãªã©ã§çµŒè·¯æ¢ç´¢ã‚’ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚\n  ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‘ã‚¹ãƒ—ãƒ©ãƒ³ã®ä¾‹(from PythonRobotics)  Local Path Planning å±€æ‰€çµŒè·¯è¨ˆç”»(Local Path Planning)ã¯ã€ãƒ­ãƒœãƒƒãƒˆå‘¨è¾ºã®éšœå®³ç‰©ã‚’é¿ã‘ãªãŒã‚‰ã€ç›®æ¨™å€¤ã¸æ—©ãè¡Œã‘ã‚‹ã‚ˆã†ãªçµŒè·¯(ãƒ­ãƒœãƒƒãƒˆã®è¡Œå‹•)ã‚’ç®—å‡ºã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã™ã€‚\nä»£è¡¨çš„ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ã—ã¦Dynamic Window Approach(DWA)ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚   ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ã‚¹ãƒ—ãƒ©ãƒ³æ¦‚è¦(from ROS wiki) \nã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ¦‚è¦ã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚\n ãƒ­ãƒœãƒƒãƒˆã®è¡Œå‹•ç©ºé–“ã‹ã‚‰è¡Œå‹•ã‚’ã‚µãƒ³ãƒ—ãƒ« ã‚µãƒ³ãƒ—ãƒ«ã—ãŸè¡Œå‹•ã¨ãƒ­ãƒœãƒƒãƒˆã®é‹å‹•ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ã¦ã€ä¸€å®šæ™‚é–“ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã—ã¦çµŒè·¯ã‚’ç”Ÿæˆ ç”Ÿæˆã—ãŸçµŒè·¯ã”ã¨ã«ã€ã‚³ã‚¹ãƒˆãƒãƒƒãƒ—ã‚„ã‚´ãƒ¼ãƒ«æƒ…å ±ã‹ã‚‰ã‚³ã‚¹ãƒˆã‚’ç®—å‡º ã‚³ã‚¹ãƒˆæœ€å°ã®çµŒè·¯ã‚’é¸æŠã—ã€ãƒ­ãƒœãƒƒãƒˆã®æŒ‡ä»¤å€¤ã¨ã™ã‚‹ 1~4ã‚’ç¹°ã‚Šè¿”ã™  æ¼”ç¿’ Dockerfileã«navigationã‚’è¿½åŠ ã—ã¦Buildã™ã‚‹ \n -- navigationã‚’launchã—ã¦ã€rvizä¸Šã§æŒ‡å®šã—ãŸä½ç½®ã¾ã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã•ã›ã¦ã¿ã‚‹ (é–‹ç™ºPC)(docker) roslaunch navigation_tutorial navigation.launch   navigationã‚’launchã—ã¦ã€mapåº§æ¨™ç³»ã®ä½ç½®ã‚’æŒ‡å®šã—ã¦ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã•ã›ã¦ã¿ã‚‹ \n -- navigationã®paramã‚’ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹ move baseã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ navigation_tutorial/params ã®ä¸­ã«yamlå½¢å¼ã§ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚\nlaunchãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯loadã‚³ãƒãƒ³ãƒ‰ã§yamlã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™ã€‚\n move_base base_local_planner costmap_2d  ","date":1609459200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1609459200,"objectID":"ea25624150d5f3e46f1ef192419e7583","permalink":"https://matsuolab.github.io/roomba_hack/course/chap4/navigation/","publishdate":"2021-01-01T00:00:00Z","relpermalink":"/roomba_hack/course/chap4/navigation/","section":"course","summary":"","tags":null,"title":"ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³","type":"book"},{"authors":null,"categories":null,"content":"Congratulations to Jian Yang and Monica Hall for winning the Best Paper Award at the 2020 Conference on Wowchemy for their paper â€œLearning Wowchemyâ€.\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Integer tempus augue non tempor egestas. Proin nisl nunc, dignissim in accumsan dapibus, auctor ullamcorper neque. Quisque at elit felis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aenean eget elementum odio. Cras interdum eget risus sit amet aliquet. In volutpat, nisl ut fringilla dignissim, arcu nisl suscipit ante, at accumsan sapien nisl eu eros.\nSed eu dui nec ligula bibendum dapibus. Nullam imperdiet auctor tortor, vel cursus mauris malesuada non. Quisque ultrices euismod dapibus. Aenean sed gravida risus. Sed nisi tortor, vulputate nec quam non, placerat porta nisl. Nunc varius lobortis urna, condimentum facilisis ipsum molestie eu. Ut molestie eleifend ligula sed dignissim. Duis ut tellus turpis. Praesent tincidunt, nunc sed congue malesuada, mauris enim maximus massa, eget interdum turpis urna et ante. Morbi sem nisl, cursus quis mollis et, interdum luctus augue. Aliquam laoreet, leo et accumsan tincidunt, libero neque aliquet lectus, a ultricies lorem mi a orci.\nMauris dapibus sem vel magna convallis laoreet. Donec in venenatis urna, vitae sodales odio. Praesent tortor diam, varius non luctus nec, bibendum vel est. Quisque id sem enim. Maecenas at est leo. Vestibulum tristique pellentesque ex, blandit placerat nunc eleifend sit amet. Fusce eget lectus bibendum, accumsan mi quis, luctus sem. Etiam vitae nulla scelerisque, eleifend odio in, euismod quam. Etiam porta ullamcorper massa, vitae gravida turpis euismod quis. Mauris sodales sem ac ultrices viverra. In placerat ultrices sapien. Suspendisse eu arcu hendrerit, luctus tortor cursus, maximus dolor. Proin et velit et quam gravida dapibus. Donec blandit justo ut consequat tristique.\n","date":1606867200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1606867200,"objectID":"2a0ec8a990dbd78a00c4e15a09364b00","permalink":"https://matsuolab.github.io/roomba_hack/post/20-12-02-icml-best-paper/","publishdate":"2020-12-02T00:00:00Z","relpermalink":"/roomba_hack/post/20-12-02-icml-best-paper/","section":"post","summary":"Congratulations to Jian Yang and Monica Hall for winning the Best Paper Award at the 2020 Conference on Wowchemy for their paper â€œLearning Wowchemyâ€.\n","tags":null,"title":"Jian Yang and Monica Hall Win the Best Paper Award at Wowchemy 2020","type":"post"},{"authors":null,"categories":null,"content":"Congratulations to Richard Hendricks for winning first place in the Wowchemy Prize.\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Integer tempus augue non tempor egestas. Proin nisl nunc, dignissim in accumsan dapibus, auctor ullamcorper neque. Quisque at elit felis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aenean eget elementum odio. Cras interdum eget risus sit amet aliquet. In volutpat, nisl ut fringilla dignissim, arcu nisl suscipit ante, at accumsan sapien nisl eu eros.\nSed eu dui nec ligula bibendum dapibus. Nullam imperdiet auctor tortor, vel cursus mauris malesuada non. Quisque ultrices euismod dapibus. Aenean sed gravida risus. Sed nisi tortor, vulputate nec quam non, placerat porta nisl. Nunc varius lobortis urna, condimentum facilisis ipsum molestie eu. Ut molestie eleifend ligula sed dignissim. Duis ut tellus turpis. Praesent tincidunt, nunc sed congue malesuada, mauris enim maximus massa, eget interdum turpis urna et ante. Morbi sem nisl, cursus quis mollis et, interdum luctus augue. Aliquam laoreet, leo et accumsan tincidunt, libero neque aliquet lectus, a ultricies lorem mi a orci.\nMauris dapibus sem vel magna convallis laoreet. Donec in venenatis urna, vitae sodales odio. Praesent tortor diam, varius non luctus nec, bibendum vel est. Quisque id sem enim. Maecenas at est leo. Vestibulum tristique pellentesque ex, blandit placerat nunc eleifend sit amet. Fusce eget lectus bibendum, accumsan mi quis, luctus sem. Etiam vitae nulla scelerisque, eleifend odio in, euismod quam. Etiam porta ullamcorper massa, vitae gravida turpis euismod quis. Mauris sodales sem ac ultrices viverra. In placerat ultrices sapien. Suspendisse eu arcu hendrerit, luctus tortor cursus, maximus dolor. Proin et velit et quam gravida dapibus. Donec blandit justo ut consequat tristique.\n","date":1606780800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1606780800,"objectID":"be2bd15f022f0d83fe9ffd743881e70c","permalink":"https://matsuolab.github.io/roomba_hack/post/20-12-01-wowchemy-prize/","publishdate":"2020-12-01T00:00:00Z","relpermalink":"/roomba_hack/post/20-12-01-wowchemy-prize/","section":"post","summary":"Congratulations to Richard Hendricks for winning first place in the Wowchemy Prize.\n","tags":null,"title":"Richard Hendricks Wins First Place in the Wowchemy Prize","type":"post"},{"authors":null,"categories":null,"content":"","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":-62135596800,"objectID":"f26b5133c34eec1aa0a09390a36c2ade","permalink":"https://matsuolab.github.io/roomba_hack/admin/config.yml","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/roomba_hack/admin/config.yml","section":"","summary":"","tags":null,"title":"","type":"wowchemycms"},{"authors":null,"categories":null,"content":"","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":-62135596800,"objectID":"6d99026b9e19e4fa43d5aadf147c7176","permalink":"https://matsuolab.github.io/roomba_hack/contact/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/roomba_hack/contact/","section":"","summary":"","tags":null,"title":"","type":"widget_page"}]